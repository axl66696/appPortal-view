/* eslint-disable @typescript-eslint/no-non-null-assertion */
import { Component, Input, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ImageModule } from 'primeng/image';
import { DropdownModule } from 'primeng/dropdown';
import { ToastModule } from 'primeng/toast';
import { ButtonModule } from 'primeng/button';
import { PasswordModule } from 'primeng/password';
import { FormsModule } from '@angular/forms';
import { Router, RouterLink } from '@angular/router';
import { MessageService } from 'primeng/api';
import { SharedService } from '@his-base/shared';
import { LoginService } from './login.service';
import { WsNatsService } from './ws-nats.service';
import { UserAccount, UserToken } from '@his-viewmodel/app-portal/dist';
import { LoginReq } from '@his-viewmodel/app-portal/dist';
import { ForgotPasswordComponent } from "./forgot-password/forgot-password.component";
import { ResetPasswordComponent } from './reset-password/reset-password.component';
import { InputTextModule } from 'primeng/inputtext';
import * as branchData from '../assets/data/branchesName.json';
import '@angular/localize/init';
import { TranslateModule, TranslateService } from '@ngx-translate/core';
import { UserProfileService } from 'service';
import * as i0 from "@angular/core";
import * as i1 from "primeng/button";
import * as i2 from "primeng/password";
import * as i3 from "@angular/forms";
import * as i4 from "primeng/dropdown";
import * as i5 from "primeng/toast";
import * as i6 from "primeng/inputtext";
import * as i7 from "@ngx-translate/core";
export class LoginComponent {
    constructor() {
        /** 院區選項
         * @type {string[]}
         * @memberof LoginComponent
         */
        this.branchesOption = [];
        /** 輸入的密碼
         * @type {string}
         * @memberof LoginComponent
         */
        this.password = '';
        /** 登入資訊
         * @type {LoginReq}
         * @memberof LoginComponent
         */
        this.loginReq = new LoginReq();
        /** 使用者權杖
         * @type {UserToken}
         * @memberof LoginComponent
         */
        this.userToken = new UserToken();
        /** 忘記密碼頁面顯示與否
         * @type {boolean}
         * @memberof LoginComponent
         */
        this.isVisibleForgot = false;
        /** 重置密碼頁面顯示與否
         * @type {boolean}
         * @memberof LoginComponent
         */
        this.isVisibleReset = false;
        /** 使用者帳號資訊
         * @type {UserAccount}
         * @memberof LoginComponent
         */
        this.userAccount = new UserAccount();
        this.messageService = inject(MessageService);
        this.router = inject(Router);
        this.userProfileService = inject(UserProfileService);
        this.#loginService = inject(LoginService);
        this.#wsNatsService = inject(WsNatsService);
        this.#sharedService = inject(SharedService);
        this.#translateService = inject(TranslateService);
    }
    #loginService;
    #wsNatsService;
    #sharedService;
    #translateService;
    /** 初始化登入畫面為淺色模式 以及與Nats連線
     * @memberof LoginComponent
     */
    async ngOnInit() {
        this.branchesOption = Object.values(branchData)[0];
        await this.#wsNatsService.connect();
        const themeLink = document.getElementById('theme-css');
        themeLink.href = 'app/styles/theme.css';
    }
    /** 點擊登入按鈕
     * @memberof LoginComponent
     */
    onLoginClick() {
        try {
            this.loginReq.passwordHash = this.#loginService.getHashPassword(this.password);
            this.#loginService.getUserToken(this.loginReq).subscribe(x => {
                this.userToken = x;
                this.checkUserToken(this.userToken);
            });
        }
        catch (error) {
            this.messageService.add({ severity: 'error', summary: 'Error', detail: this.#translateService.instant('登入失敗') });
        }
    }
    /** 檢查有無登入授權
     * @param {UserToken} userToken
     * @memberof LoginComponent
     */
    checkUserToken(userToken) {
        if (userToken.token !== '') {
            this.#sharedService.sharedValue = null;
            this.#loginService.getUserAccount(userToken.userCode.code).subscribe(x => {
                this.userAccount = x;
                this.userProfileService.getUserProfile(x.userCode.code, "app-portal")
                    .subscribe((x) => {
                    this.userProfileService.userProfile.set(x);
                    const appPortalProfile = x.profile;
                    const themeLink = document.getElementById('theme-css');
                    if (appPortalProfile.selectedTheme === 'dark') {
                        themeLink.href = 'app/styles/theme-dark.css'; // 切換到 dark 主題的樣式表
                    }
                    document.documentElement.style.fontSize = appPortalProfile.fontSize + 'px'; //套用使用者字型大小設定
                });
                const key = this.#sharedService.setValue(this.userAccount);
                this.router.navigate(['/home'], { state: { token: key } });
            });
        }
        else {
            this.messageService.add({ severity: 'error', summary: 'Error', detail: this.#translateService.instant('帳號或密碼錯誤') });
        }
    }
    /** 點擊忘記密碼
     * @memberof LoginComponent
     */
    onForgotClick() {
        this.isVisibleForgot = true;
    }
    /** 關閉忘記密碼視窗
     * @memberof LoginComponent
     */
    onHideForgot() {
        this.isVisibleForgot = false;
    }
    /** 關閉重置密碼視窗
     * @memberof LoginComponent
     */
    onHideReset() {
        this.isVisibleReset = false;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.8", ngImport: i0, type: LoginComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.8", type: LoginComponent, isStandalone: true, selector: "his-login", inputs: { token: "token" }, providers: [MessageService], ngImport: i0, template: "<div class=\"login-page-container\">\n  <div class=\"login-container\">\n    <div class=\"welcome-container\">\n    <div class=\"welcome-style\">Welcome!</div>\n  </div>\n    <div class=\"logo-container\">\n      <img src=\"assets/companyLogo.png\" alt=\"Image\" />\n    </div>\n\n    <div class=\"title-style\">\u96F2\u884C\u81F3\u5584\u91AB\u7642\u7CFB\u7D71</div>\n\n\n    <div class=\"form-container\">\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"branchSelector\">{{'\u9662\u5340'|translate}}</label>\n        <p-dropdown\n          id=\"branchSelector\"\n          [options]=\"branchesOption\"\n          [(ngModel)]=\"loginReq.orgNo\"\n          [placeholder]=\"'\u8ACB\u9078\u64C7\u9662\u5340' | translate\"\n        >\n      </p-dropdown>\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"UserName\">{{'\u5E33\u865F'|translate}}</label>\n        <input\n          pInputText\n          id=\"UserName\"\n          type=\"text\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5E33\u865F' | translate\"\n          [(ngModel)]=\"loginReq.userCode.code\"\n          class=\"p-inputtext p-element p-component\"\n        />\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"Password\">{{'\u5BC6\u78BC'|translate}}</label>\n        <p-password\n          id=\"password\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5BC6\u78BC' | translate\"\n          [(ngModel)]=\"password\"\n          [feedback]=\"false\"\n          (keyup.enter)=\"onLoginClick()\"\n          class=\"p-fluid\"\n        ></p-password>\n      </div>\n      <div class=\"button-group\">\n        <p-button [label]=\"'\u5FD8\u8A18\u5BC6\u78BC' | translate\" styleClass=\"p-button-link\" (onClick)=\"onForgotClick()\"></p-button>\n        <button pButton pRipple-label [label]=\"'\u767B\u5165' | translate\" (click)=\"onLoginClick()\"> </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"image-container\">\n    <div class=\"image-box\">\n      <img src=\"assets/loginImage.png\" class=\"image-style\" alt=\"Image\" />\n    </div>\n  </div>\n</div>\n<p-toast></p-toast>\n\n<his-forgot-password (hideForgot)=\"onHideForgot()\" [isVisibleForgot]=isVisibleForgot></his-forgot-password>\n<his-reset-password (hideReset)=\"onHideReset()\" [isVisibleReset]=isVisibleReset [token]=\"token\"></his-reset-password>\n\n", styles: [":host ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem}:host ::ng-deep .p-dropdown,:host ::ng-deep .p-inputtext{width:100%;background:var(--white)!important}:host ::ng-deep .button-group{display:flex;gap:var(--spacing-lg)}:host ::ng-deep .button-group .p-button{max-width:142px;width:calc(50% - 8px)}:host ::ng-deep .button-group p-button{width:calc(50% - 8px)}:host ::ng-deep .button-group p-button .p-button{width:100%}:host ::ng-deep .p-dropdown{border-color:var(--outline);max-height:40px}:host ::ng-deep .p-dropdown .p-inputtext{padding:10px 16px}input:-webkit-autofill{-webkit-box-shadow:0 0 0 40px white inset!important}.login-page-container{width:100%;height:100%;display:flex}.login-container{width:33%;height:100%;padding:var(--spacing-xxl);display:flex;flex-direction:column;align-items:center;background-color:var(--surface-card)}.welcome-container{position:relative;width:100%;display:flex}.welcome-style{color:#13141461;font-size:32px;font-style:normal;font-weight:700;line-height:44px;letter-spacing:1.28px}.logo-container{width:44.79%;object-fit:cover;padding:var(--spacing-xxl) 0}.logo-container img{width:100%;display:block}.form-container{width:52%;min-width:250px;display:flex;flex-direction:column;justify-content:center;gap:var(--spacing-lg)}.title-style{font-size:24px;font-style:normal;font-weight:700;line-height:32px;display:flex;justify-content:center;padding-bottom:var(--spacing-xxl)}.input-text{display:flex;flex-direction:column;gap:8px}.input-label{color:var(--surface-on-surface);font-size:20px;font-style:normal;font-weight:700;line-height:28px;letter-spacing:.4px}.button-group{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-lg)}.image-container{width:67%;height:100%}.image-box{width:100%;height:100%}.image-style{width:100%;height:100%;object-fit:cover;display:block}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: ButtonModule }, { kind: "directive", type: i1.ButtonDirective, selector: "[pButton]", inputs: ["iconPos", "loadingIcon", "label", "icon", "loading"] }, { kind: "component", type: i1.Button, selector: "p-button", inputs: ["type", "iconPos", "icon", "badge", "label", "disabled", "loading", "loadingIcon", "style", "styleClass", "badgeClass", "ariaLabel"], outputs: ["onClick", "onFocus", "onBlur"] }, { kind: "ngmodule", type: PasswordModule }, { kind: "component", type: i2.Password, selector: "p-password", inputs: ["ariaLabel", "ariaLabelledBy", "label", "disabled", "promptLabel", "mediumRegex", "strongRegex", "weakLabel", "mediumLabel", "maxLength", "strongLabel", "inputId", "feedback", "appendTo", "toggleMask", "inputStyleClass", "styleClass", "style", "inputStyle", "showTransitionOptions", "hideTransitionOptions", "autocomplete", "placeholder", "showClear"], outputs: ["onFocus", "onBlur", "onClear"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: ImageModule }, { kind: "ngmodule", type: DropdownModule }, { kind: "component", type: i4.Dropdown, selector: "p-dropdown", inputs: ["scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "dataKey", "filterBy", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "lazy", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "overlayOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "disabled", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "filterValue", "options"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear", "onLazyLoad"] }, { kind: "ngmodule", type: ToastModule }, { kind: "component", type: i5.Toast, selector: "p-toast", inputs: ["key", "autoZIndex", "baseZIndex", "life", "style", "styleClass", "position", "preventOpenDuplicates", "preventDuplicates", "showTransformOptions", "hideTransformOptions", "showTransitionOptions", "hideTransitionOptions", "breakpoints"], outputs: ["onClose"] }, { kind: "component", type: ForgotPasswordComponent, selector: "his-forgot-password", inputs: ["isVisibleForgot"], outputs: ["hideForgot"] }, { kind: "component", type: ResetPasswordComponent, selector: "his-reset-password", inputs: ["isVisibleReset", "token"], outputs: ["hideReset"] }, { kind: "ngmodule", type: InputTextModule }, { kind: "directive", type: i6.InputText, selector: "[pInputText]" }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i7.TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.8", ngImport: i0, type: LoginComponent, decorators: [{
            type: Component,
            args: [{ selector: 'his-login', standalone: true, providers: [MessageService], imports: [CommonModule,
                        ButtonModule,
                        PasswordModule,
                        FormsModule,
                        RouterLink,
                        ImageModule,
                        DropdownModule,
                        ToastModule,
                        ForgotPasswordComponent,
                        ResetPasswordComponent,
                        InputTextModule,
                        TranslateModule
                    ], template: "<div class=\"login-page-container\">\n  <div class=\"login-container\">\n    <div class=\"welcome-container\">\n    <div class=\"welcome-style\">Welcome!</div>\n  </div>\n    <div class=\"logo-container\">\n      <img src=\"assets/companyLogo.png\" alt=\"Image\" />\n    </div>\n\n    <div class=\"title-style\">\u96F2\u884C\u81F3\u5584\u91AB\u7642\u7CFB\u7D71</div>\n\n\n    <div class=\"form-container\">\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"branchSelector\">{{'\u9662\u5340'|translate}}</label>\n        <p-dropdown\n          id=\"branchSelector\"\n          [options]=\"branchesOption\"\n          [(ngModel)]=\"loginReq.orgNo\"\n          [placeholder]=\"'\u8ACB\u9078\u64C7\u9662\u5340' | translate\"\n        >\n      </p-dropdown>\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"UserName\">{{'\u5E33\u865F'|translate}}</label>\n        <input\n          pInputText\n          id=\"UserName\"\n          type=\"text\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5E33\u865F' | translate\"\n          [(ngModel)]=\"loginReq.userCode.code\"\n          class=\"p-inputtext p-element p-component\"\n        />\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"Password\">{{'\u5BC6\u78BC'|translate}}</label>\n        <p-password\n          id=\"password\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5BC6\u78BC' | translate\"\n          [(ngModel)]=\"password\"\n          [feedback]=\"false\"\n          (keyup.enter)=\"onLoginClick()\"\n          class=\"p-fluid\"\n        ></p-password>\n      </div>\n      <div class=\"button-group\">\n        <p-button [label]=\"'\u5FD8\u8A18\u5BC6\u78BC' | translate\" styleClass=\"p-button-link\" (onClick)=\"onForgotClick()\"></p-button>\n        <button pButton pRipple-label [label]=\"'\u767B\u5165' | translate\" (click)=\"onLoginClick()\"> </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"image-container\">\n    <div class=\"image-box\">\n      <img src=\"assets/loginImage.png\" class=\"image-style\" alt=\"Image\" />\n    </div>\n  </div>\n</div>\n<p-toast></p-toast>\n\n<his-forgot-password (hideForgot)=\"onHideForgot()\" [isVisibleForgot]=isVisibleForgot></his-forgot-password>\n<his-reset-password (hideReset)=\"onHideReset()\" [isVisibleReset]=isVisibleReset [token]=\"token\"></his-reset-password>\n\n", styles: [":host ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem}:host ::ng-deep .p-dropdown,:host ::ng-deep .p-inputtext{width:100%;background:var(--white)!important}:host ::ng-deep .button-group{display:flex;gap:var(--spacing-lg)}:host ::ng-deep .button-group .p-button{max-width:142px;width:calc(50% - 8px)}:host ::ng-deep .button-group p-button{width:calc(50% - 8px)}:host ::ng-deep .button-group p-button .p-button{width:100%}:host ::ng-deep .p-dropdown{border-color:var(--outline);max-height:40px}:host ::ng-deep .p-dropdown .p-inputtext{padding:10px 16px}input:-webkit-autofill{-webkit-box-shadow:0 0 0 40px white inset!important}.login-page-container{width:100%;height:100%;display:flex}.login-container{width:33%;height:100%;padding:var(--spacing-xxl);display:flex;flex-direction:column;align-items:center;background-color:var(--surface-card)}.welcome-container{position:relative;width:100%;display:flex}.welcome-style{color:#13141461;font-size:32px;font-style:normal;font-weight:700;line-height:44px;letter-spacing:1.28px}.logo-container{width:44.79%;object-fit:cover;padding:var(--spacing-xxl) 0}.logo-container img{width:100%;display:block}.form-container{width:52%;min-width:250px;display:flex;flex-direction:column;justify-content:center;gap:var(--spacing-lg)}.title-style{font-size:24px;font-style:normal;font-weight:700;line-height:32px;display:flex;justify-content:center;padding-bottom:var(--spacing-xxl)}.input-text{display:flex;flex-direction:column;gap:8px}.input-label{color:var(--surface-on-surface);font-size:20px;font-style:normal;font-weight:700;line-height:28px;letter-spacing:.4px}.button-group{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-lg)}.image-container{width:67%;height:100%}.image-box{width:100%;height:100%}.image-style{width:100%;height:100%;object-fit:cover;display:block}\n"] }]
        }], propDecorators: { token: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdXNlci1sb2dpbi9zcmMvbGliL2xvZ2luLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL3VzZXItbG9naW4vc3JjL2xpYi9sb2dpbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDckQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUM3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDakQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFlLFNBQVMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN0RixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUNuRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxLQUFLLFVBQVUsTUFBTSxrQ0FBa0MsQ0FBQTtBQUM5RCxPQUFPLHdCQUF3QixDQUFDO0FBQ2hDLE9BQU8sRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxTQUFTLENBQUM7Ozs7Ozs7OztBQXNCN0MsTUFBTSxPQUFPLGNBQWM7SUFwQjNCO1FBNEJFOzs7V0FHRztRQUNILG1CQUFjLEdBQWEsRUFBRSxDQUFDO1FBRTlCOzs7V0FHRztRQUNILGFBQVEsR0FBVyxFQUFFLENBQUM7UUFFdEI7OztXQUdHO1FBQ0gsYUFBUSxHQUFhLElBQUksUUFBUSxFQUFFLENBQUM7UUFFcEM7OztXQUdHO1FBQ0gsY0FBUyxHQUFjLElBQUksU0FBUyxFQUFFLENBQUM7UUFFdkM7OztXQUdHO1FBQ0gsb0JBQWUsR0FBWSxLQUFLLENBQUM7UUFFakM7OztXQUdHO1FBQ0gsbUJBQWMsR0FBWSxLQUFLLENBQUM7UUFFaEM7OztXQUdHO1FBQ0gsZ0JBQVcsR0FBZ0IsSUFBSSxXQUFXLEVBQUUsQ0FBQztRQUU3QyxtQkFBYyxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN4QyxXQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hCLHVCQUFrQixHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2hELGtCQUFhLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3JDLG1CQUFjLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3ZDLG1CQUFjLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3ZDLHNCQUFpQixHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0tBNEU3QztJQS9FQyxhQUFhLENBQXdCO0lBQ3JDLGNBQWMsQ0FBeUI7SUFDdkMsY0FBYyxDQUF5QjtJQUN2QyxpQkFBaUIsQ0FBMkI7SUFFNUM7O09BRUc7SUFDSCxLQUFLLENBQUMsUUFBUTtRQUNaLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQXdCLENBQUE7UUFDekUsTUFBTSxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3BDLE1BQU0sU0FBUyxHQUFvQixRQUFRLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQ3ZFLFNBQVMsQ0FBQyxJQUFJLEdBQUcsc0JBQXNCLENBQUE7SUFDekMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsWUFBWTtRQUNWLElBQUk7WUFDRixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDM0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUE7Z0JBQ2xCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3RDLENBQUMsQ0FBQyxDQUFBO1NBQ0g7UUFDRCxPQUFPLEtBQUssRUFBRTtZQUNaLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNsSDtJQUNILENBQUM7SUFFRDs7O09BR0c7SUFDSCxjQUFjLENBQUMsU0FBb0I7UUFDakMsSUFBSSxTQUFTLENBQUMsS0FBSyxLQUFLLEVBQUUsRUFBRTtZQUMxQixJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7WUFDdkMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3ZFLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFBO2dCQUNwQixJQUFJLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQztxQkFDbEUsU0FBUyxDQUFDLENBQUMsQ0FBYyxFQUFFLEVBQUU7b0JBQzVCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUMzQyxNQUFNLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxPQUEyQixDQUFDO29CQUN2RCxNQUFNLFNBQVMsR0FBb0IsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztvQkFDeEUsSUFBSSxnQkFBZ0IsQ0FBQyxhQUFhLEtBQUssTUFBTSxFQUFFO3dCQUM3QyxTQUFTLENBQUMsSUFBSSxHQUFHLDJCQUEyQixDQUFDLENBQUMsa0JBQWtCO3FCQUNqRTtvQkFDRCxRQUFRLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFBLGFBQWE7Z0JBQzFGLENBQUMsQ0FBQyxDQUFBO2dCQUNKLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtnQkFDMUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDN0QsQ0FBQyxDQUFDLENBQUE7U0FDSDthQUNJO1lBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3JIO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsYUFBYTtRQUNYLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0lBQzlCLENBQUM7SUFFRDs7T0FFRztJQUNILFlBQVk7UUFDVixJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFDOUIsQ0FBQzs4R0FuSVUsY0FBYztrR0FBZCxjQUFjLG9GQWZkLENBQUMsY0FBYyxDQUFDLDBCQzdCN0IsdTNFQThEQSxtNUREaENZLFlBQVksOEJBQ3BCLFlBQVksOFpBQ1osY0FBYyxxZkFDZCxXQUFXLDhtQkFFWCxXQUFXLDhCQUNYLGNBQWMsK2lDQUNkLFdBQVcsd1dBQ1gsdUJBQXVCLHNIQUN2QixzQkFBc0IsMkhBQ3RCLGVBQWUsbUdBQ2YsZUFBZTs7MkZBR04sY0FBYztrQkFwQjFCLFNBQVM7K0JBQ0UsV0FBVyxjQUNULElBQUksYUFHTCxDQUFDLGNBQWMsQ0FBQyxXQUNsQixDQUFDLFlBQVk7d0JBQ3BCLFlBQVk7d0JBQ1osY0FBYzt3QkFDZCxXQUFXO3dCQUNYLFVBQVU7d0JBQ1YsV0FBVzt3QkFDWCxjQUFjO3dCQUNkLFdBQVc7d0JBQ1gsdUJBQXVCO3dCQUN2QixzQkFBc0I7d0JBQ3RCLGVBQWU7d0JBQ2YsZUFBZTtxQkFDaEI7OEJBUVEsS0FBSztzQkFBYixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBJbWFnZU1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvaW1hZ2UnO1xuaW1wb3J0IHsgRHJvcGRvd25Nb2R1bGUgfSBmcm9tICdwcmltZW5nL2Ryb3Bkb3duJztcbmltcG9ydCB7IFRvYXN0TW9kdWxlIH0gZnJvbSAncHJpbWVuZy90b2FzdCc7XG5pbXBvcnQgeyBCdXR0b25Nb2R1bGUgfSBmcm9tICdwcmltZW5nL2J1dHRvbic7XG5pbXBvcnQgeyBQYXNzd29yZE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvcGFzc3dvcmQnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBSb3V0ZXIsIFJvdXRlckxpbmsgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTWVzc2FnZVNlcnZpY2UgfSBmcm9tICdwcmltZW5nL2FwaSc7XG5pbXBvcnQgeyBTaGFyZWRTZXJ2aWNlIH0gZnJvbSAnQGhpcy1iYXNlL3NoYXJlZCc7XG5pbXBvcnQgeyBMb2dpblNlcnZpY2UgfSBmcm9tICcuL2xvZ2luLnNlcnZpY2UnO1xuaW1wb3J0IHsgV3NOYXRzU2VydmljZSB9IGZyb20gJy4vd3MtbmF0cy5zZXJ2aWNlJztcbmltcG9ydCB7IFVzZXJBY2NvdW50LCBVc2VyUHJvZmlsZSwgVXNlclRva2VuIH0gZnJvbSAnQGhpcy12aWV3bW9kZWwvYXBwLXBvcnRhbC9kaXN0JztcbmltcG9ydCB7IExvZ2luUmVxIH0gZnJvbSAnQGhpcy12aWV3bW9kZWwvYXBwLXBvcnRhbC9kaXN0J1xuaW1wb3J0IHsgRm9yZ290UGFzc3dvcmRDb21wb25lbnQgfSBmcm9tIFwiLi9mb3Jnb3QtcGFzc3dvcmQvZm9yZ290LXBhc3N3b3JkLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgUmVzZXRQYXNzd29yZENvbXBvbmVudCB9IGZyb20gJy4vcmVzZXQtcGFzc3dvcmQvcmVzZXQtcGFzc3dvcmQuY29tcG9uZW50JztcbmltcG9ydCB7IElucHV0VGV4dE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvaW5wdXR0ZXh0JztcbmltcG9ydCAqIGFzIGJyYW5jaERhdGEgZnJvbSAnLi4vYXNzZXRzL2RhdGEvYnJhbmNoZXNOYW1lLmpzb24nXG5pbXBvcnQgJ0Bhbmd1bGFyL2xvY2FsaXplL2luaXQnO1xuaW1wb3J0IHsgVHJhbnNsYXRlTW9kdWxlLCBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBVc2VyUHJvZmlsZVNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlJztcbmltcG9ydCB7IEFwcFBvcnRhbFByb2ZpbGUgfSBmcm9tICcuL3R5cGVzL2FwcFBvcnRhbFByb2ZpbGUuZCc7XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdoaXMtbG9naW4nLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICB0ZW1wbGF0ZVVybDogJy4vbG9naW4uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sb2dpbi5jb21wb25lbnQuc2NzcyddLFxuICBwcm92aWRlcnM6IFtNZXNzYWdlU2VydmljZV0sXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsXG4gICAgQnV0dG9uTW9kdWxlLFxuICAgIFBhc3N3b3JkTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIFJvdXRlckxpbmssXG4gICAgSW1hZ2VNb2R1bGUsXG4gICAgRHJvcGRvd25Nb2R1bGUsXG4gICAgVG9hc3RNb2R1bGUsXG4gICAgRm9yZ290UGFzc3dvcmRDb21wb25lbnQsXG4gICAgUmVzZXRQYXNzd29yZENvbXBvbmVudCxcbiAgICBJbnB1dFRleHRNb2R1bGUsXG4gICAgVHJhbnNsYXRlTW9kdWxlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTG9naW5Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIC8qKiDliqDlr4borZjliKV0b2tlblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIEBJbnB1dCgpIHRva2VuITogc3RyaW5nO1xuXG4gIC8qKiDpmaLljYDpgbjpoIVcbiAgICogQHR5cGUge3N0cmluZ1tdfVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIGJyYW5jaGVzT3B0aW9uOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8qKiDovLjlhaXnmoTlr4bnorxcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBwYXNzd29yZDogc3RyaW5nID0gJyc7XG5cbiAgLyoqIOeZu+WFpeizh+ioilxuICAgKiBAdHlwZSB7TG9naW5SZXF9XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgbG9naW5SZXE6IExvZ2luUmVxID0gbmV3IExvZ2luUmVxKCk7XG5cbiAgLyoqIOS9v+eUqOiAheasiuadllxuICAgKiBAdHlwZSB7VXNlclRva2VufVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIHVzZXJUb2tlbjogVXNlclRva2VuID0gbmV3IFVzZXJUb2tlbigpO1xuXG4gIC8qKiDlv5joqJjlr4bnorzpoIHpnaLpoa/npLroiIflkKZcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgaXNWaXNpYmxlRm9yZ290OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqIOmHjee9ruWvhueivOmggemdoumhr+ekuuiIh+WQplxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBpc1Zpc2libGVSZXNldDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKiDkvb/nlKjogIXluLPomZ/os4foqIpcbiAgICogQHR5cGUge1VzZXJBY2NvdW50fVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIHVzZXJBY2NvdW50OiBVc2VyQWNjb3VudCA9IG5ldyBVc2VyQWNjb3VudCgpO1xuXG4gIG1lc3NhZ2VTZXJ2aWNlID0gaW5qZWN0KE1lc3NhZ2VTZXJ2aWNlKTtcbiAgcm91dGVyID0gaW5qZWN0KFJvdXRlcik7XG4gIHVzZXJQcm9maWxlU2VydmljZSA9IGluamVjdChVc2VyUHJvZmlsZVNlcnZpY2UpO1xuICAjbG9naW5TZXJ2aWNlID0gaW5qZWN0KExvZ2luU2VydmljZSk7XG4gICN3c05hdHNTZXJ2aWNlID0gaW5qZWN0KFdzTmF0c1NlcnZpY2UpO1xuICAjc2hhcmVkU2VydmljZSA9IGluamVjdChTaGFyZWRTZXJ2aWNlKTtcbiAgI3RyYW5zbGF0ZVNlcnZpY2UgPSBpbmplY3QoVHJhbnNsYXRlU2VydmljZSlcblxuICAvKiog5Yid5aeL5YyW55m75YWl55Wr6Z2i54K65re66Imy5qih5byPIOS7peWPiuiIh05hdHPpgKPnt5pcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBhc3luYyBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmJyYW5jaGVzT3B0aW9uID0gT2JqZWN0LnZhbHVlcyhicmFuY2hEYXRhKVswXSBhcyB1bmtub3duIGFzIHN0cmluZ1tdXG4gICAgYXdhaXQgdGhpcy4jd3NOYXRzU2VydmljZS5jb25uZWN0KCk7XG4gICAgY29uc3QgdGhlbWVMaW5rID0gPEhUTUxMaW5rRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWUtY3NzJylcbiAgICB0aGVtZUxpbmsuaHJlZiA9ICdhcHAvc3R5bGVzL3RoZW1lLmNzcydcbiAgfVxuXG4gIC8qKiDpu57mk4rnmbvlhaXmjInpiJVcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkxvZ2luQ2xpY2soKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9naW5SZXEucGFzc3dvcmRIYXNoID0gdGhpcy4jbG9naW5TZXJ2aWNlLmdldEhhc2hQYXNzd29yZCh0aGlzLnBhc3N3b3JkKTtcbiAgICAgIHRoaXMuI2xvZ2luU2VydmljZS5nZXRVc2VyVG9rZW4odGhpcy5sb2dpblJlcSkuc3Vic2NyaWJlKHggPT4ge1xuICAgICAgICB0aGlzLnVzZXJUb2tlbiA9IHhcbiAgICAgICAgdGhpcy5jaGVja1VzZXJUb2tlbih0aGlzLnVzZXJUb2tlbik7XG4gICAgICB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuYWRkKHsgc2V2ZXJpdHk6ICdlcnJvcicsIHN1bW1hcnk6ICdFcnJvcicsIGRldGFpbDogdGhpcy4jdHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCfnmbvlhaXlpLHmlZcnKSB9KTtcbiAgICB9XG4gIH1cblxuICAvKiog5qqi5p+l5pyJ54Sh55m75YWl5o6I5qyKXG4gICAqIEBwYXJhbSB7VXNlclRva2VufSB1c2VyVG9rZW5cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBjaGVja1VzZXJUb2tlbih1c2VyVG9rZW46IFVzZXJUb2tlbikge1xuICAgIGlmICh1c2VyVG9rZW4udG9rZW4gIT09ICcnKSB7XG4gICAgICB0aGlzLiNzaGFyZWRTZXJ2aWNlLnNoYXJlZFZhbHVlID0gbnVsbDtcbiAgICAgIHRoaXMuI2xvZ2luU2VydmljZS5nZXRVc2VyQWNjb3VudCh1c2VyVG9rZW4udXNlckNvZGUuY29kZSkuc3Vic2NyaWJlKHggPT4ge1xuICAgICAgICB0aGlzLnVzZXJBY2NvdW50ID0geFxuICAgICAgICB0aGlzLnVzZXJQcm9maWxlU2VydmljZS5nZXRVc2VyUHJvZmlsZSh4LnVzZXJDb2RlLmNvZGUsIFwiYXBwLXBvcnRhbFwiKVxuICAgICAgICAgIC5zdWJzY3JpYmUoKHg6IFVzZXJQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVzZXJQcm9maWxlU2VydmljZS51c2VyUHJvZmlsZS5zZXQoeCk7XG4gICAgICAgICAgICBjb25zdCBhcHBQb3J0YWxQcm9maWxlID0geC5wcm9maWxlIGFzIEFwcFBvcnRhbFByb2ZpbGU7XG4gICAgICAgICAgICBjb25zdCB0aGVtZUxpbmsgPSA8SFRNTExpbmtFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1jc3MnKTtcbiAgICAgICAgICAgIGlmIChhcHBQb3J0YWxQcm9maWxlLnNlbGVjdGVkVGhlbWUgPT09ICdkYXJrJykge1xuICAgICAgICAgICAgICB0aGVtZUxpbmsuaHJlZiA9ICdhcHAvc3R5bGVzL3RoZW1lLWRhcmsuY3NzJzsgLy8g5YiH5o+b5YiwIGRhcmsg5Li76aGM55qE5qij5byP6KGoXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBhcHBQb3J0YWxQcm9maWxlLmZvbnRTaXplICsgJ3B4JzsvL+Wll+eUqOS9v+eUqOiAheWtl+Wei+Wkp+Wwj+ioreWumlxuICAgICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuI3NoYXJlZFNlcnZpY2Uuc2V0VmFsdWUodGhpcy51c2VyQWNjb3VudClcbiAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvaG9tZSddLCB7IHN0YXRlOiB7IHRva2VuOiBrZXkgfSB9KTtcbiAgICAgIH0pXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5hZGQoeyBzZXZlcml0eTogJ2Vycm9yJywgc3VtbWFyeTogJ0Vycm9yJywgZGV0YWlsOiB0aGlzLiN0cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ+W4s+iZn+aIluWvhueivOmMr+iqpCcpIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKiDpu57mk4rlv5joqJjlr4bnorxcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkZvcmdvdENsaWNrKCkge1xuICAgIHRoaXMuaXNWaXNpYmxlRm9yZ290ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKiDpl5zplonlv5joqJjlr4bnorzoppbnqpdcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkhpZGVGb3Jnb3QoKSB7XG4gICAgdGhpcy5pc1Zpc2libGVGb3Jnb3QgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiDpl5zplonph43nva7lr4bnorzoppbnqpdcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkhpZGVSZXNldCgpIHtcbiAgICB0aGlzLmlzVmlzaWJsZVJlc2V0ID0gZmFsc2U7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJsb2dpbi1wYWdlLWNvbnRhaW5lclwiPlxuICA8ZGl2IGNsYXNzPVwibG9naW4tY29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cIndlbGNvbWUtY29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cIndlbGNvbWUtc3R5bGVcIj5XZWxjb21lITwvZGl2PlxuICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibG9nby1jb250YWluZXJcIj5cbiAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2NvbXBhbnlMb2dvLnBuZ1wiIGFsdD1cIkltYWdlXCIgLz5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJ0aXRsZS1zdHlsZVwiPumbsuihjOiHs+WWhOmGq+eZguezu+e1sTwvZGl2PlxuXG5cbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC10ZXh0XCI+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImlucHV0LWxhYmVsXCIgaHRtbEZvcj1cImJyYW5jaFNlbGVjdG9yXCI+e3sn6Zmi5Y2AJ3x0cmFuc2xhdGV9fTwvbGFiZWw+XG4gICAgICAgIDxwLWRyb3Bkb3duXG4gICAgICAgICAgaWQ9XCJicmFuY2hTZWxlY3RvclwiXG4gICAgICAgICAgW29wdGlvbnNdPVwiYnJhbmNoZXNPcHRpb25cIlxuICAgICAgICAgIFsobmdNb2RlbCldPVwibG9naW5SZXEub3JnTm9cIlxuICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCIn6KuL6YG45pOH6Zmi5Y2AJyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgID5cbiAgICAgIDwvcC1kcm9wZG93bj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0LXRleHRcIj5cbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiaW5wdXQtbGFiZWxcIiBodG1sRm9yPVwiVXNlck5hbWVcIj57eyfluLPomZ8nfHRyYW5zbGF0ZX19PC9sYWJlbD5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgcElucHV0VGV4dFxuICAgICAgICAgIGlkPVwiVXNlck5hbWVcIlxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiJ+iri+i8uOWFpeW4s+iZnycgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgIFsobmdNb2RlbCldPVwibG9naW5SZXEudXNlckNvZGUuY29kZVwiXG4gICAgICAgICAgY2xhc3M9XCJwLWlucHV0dGV4dCBwLWVsZW1lbnQgcC1jb21wb25lbnRcIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtdGV4dFwiPlxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJpbnB1dC1sYWJlbFwiIGh0bWxGb3I9XCJQYXNzd29yZFwiPnt7J+WvhueivCd8dHJhbnNsYXRlfX08L2xhYmVsPlxuICAgICAgICA8cC1wYXNzd29yZFxuICAgICAgICAgIGlkPVwicGFzc3dvcmRcIlxuICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCIn6KuL6Ly45YWl5a+G56K8JyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgICAgWyhuZ01vZGVsKV09XCJwYXNzd29yZFwiXG4gICAgICAgICAgW2ZlZWRiYWNrXT1cImZhbHNlXCJcbiAgICAgICAgICAoa2V5dXAuZW50ZXIpPVwib25Mb2dpbkNsaWNrKClcIlxuICAgICAgICAgIGNsYXNzPVwicC1mbHVpZFwiXG4gICAgICAgID48L3AtcGFzc3dvcmQ+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJidXR0b24tZ3JvdXBcIj5cbiAgICAgICAgPHAtYnV0dG9uIFtsYWJlbF09XCIn5b+Y6KiY5a+G56K8JyB8IHRyYW5zbGF0ZVwiIHN0eWxlQ2xhc3M9XCJwLWJ1dHRvbi1saW5rXCIgKG9uQ2xpY2spPVwib25Gb3Jnb3RDbGljaygpXCI+PC9wLWJ1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBwQnV0dG9uIHBSaXBwbGUtbGFiZWwgW2xhYmVsXT1cIifnmbvlhaUnIHwgdHJhbnNsYXRlXCIgKGNsaWNrKT1cIm9uTG9naW5DbGljaygpXCI+IDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiaW1hZ2UtY29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cImltYWdlLWJveFwiPlxuICAgICAgPGltZyBzcmM9XCJhc3NldHMvbG9naW5JbWFnZS5wbmdcIiBjbGFzcz1cImltYWdlLXN0eWxlXCIgYWx0PVwiSW1hZ2VcIiAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuPHAtdG9hc3Q+PC9wLXRvYXN0PlxuXG48aGlzLWZvcmdvdC1wYXNzd29yZCAoaGlkZUZvcmdvdCk9XCJvbkhpZGVGb3Jnb3QoKVwiIFtpc1Zpc2libGVGb3Jnb3RdPWlzVmlzaWJsZUZvcmdvdD48L2hpcy1mb3Jnb3QtcGFzc3dvcmQ+XG48aGlzLXJlc2V0LXBhc3N3b3JkIChoaWRlUmVzZXQpPVwib25IaWRlUmVzZXQoKVwiIFtpc1Zpc2libGVSZXNldF09aXNWaXNpYmxlUmVzZXQgW3Rva2VuXT1cInRva2VuXCI+PC9oaXMtcmVzZXQtcGFzc3dvcmQ+XG5cbiJdfQ==