/* eslint-disable @typescript-eslint/no-non-null-assertion */
import { Component, Input, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ImageModule } from 'primeng/image';
import { DropdownModule } from 'primeng/dropdown';
import { ToastModule } from 'primeng/toast';
import { ButtonModule } from 'primeng/button';
import { PasswordModule } from 'primeng/password';
import { FormsModule } from '@angular/forms';
import { Router, RouterLink } from '@angular/router';
import { MessageService } from 'primeng/api';
import { SharedService } from '@his-base/shared';
import { LoginService } from './login.service';
import { WsNatsService } from './ws-nats.service';
import { UserAccount, UserToken } from '@his-viewmodel/app-portal/dist';
import { LoginReq } from '@his-viewmodel/app-portal/dist';
import { ForgotPasswordComponent } from "./forgot-password/forgot-password.component";
import { ResetPasswordComponent } from './reset-password/reset-password.component';
import { InputTextModule } from 'primeng/inputtext';
import * as branchData from '../assets/data/branchesName.json';
import '@angular/localize/init';
import { TranslateModule, TranslateService } from '@ngx-translate/core';
import { UserAccountService, UserProfileService } from 'service';
import * as i0 from "@angular/core";
import * as i1 from "primeng/button";
import * as i2 from "primeng/password";
import * as i3 from "@angular/forms";
import * as i4 from "primeng/dropdown";
import * as i5 from "primeng/toast";
import * as i6 from "primeng/inputtext";
import * as i7 from "@ngx-translate/core";
export class LoginComponent {
    constructor() {
        /** 院區選項
         * @type {string[]}
         * @memberof LoginComponent
         */
        this.branchesOption = [];
        /** 輸入的密碼
         * @type {string}
         * @memberof LoginComponent
         */
        this.password = '';
        /** 登入資訊
         * @type {LoginReq}
         * @memberof LoginComponent
         */
        this.loginReq = new LoginReq();
        /** 使用者權杖
         * @type {UserToken}
         * @memberof LoginComponent
         */
        this.userToken = new UserToken();
        /** 忘記密碼頁面顯示與否
         * @type {boolean}
         * @memberof LoginComponent
         */
        this.isVisibleForgot = false;
        /** 重置密碼頁面顯示與否
         * @type {boolean}
         * @memberof LoginComponent
         */
        this.isVisibleReset = false;
        /** 使用者帳號資訊
         * @type {UserAccount}
         * @memberof LoginComponent
         */
        this.userAccount = new UserAccount();
        this.messageService = inject(MessageService);
        this.router = inject(Router);
        this.userAccountService = inject(UserAccountService);
        this.userProfileService = inject(UserProfileService);
        this.#loginService = inject(LoginService);
        this.#wsNatsService = inject(WsNatsService);
        this.#sharedService = inject(SharedService);
        this.#translateService = inject(TranslateService);
    }
    #loginService;
    #wsNatsService;
    #sharedService;
    #translateService;
    /** 初始化登入畫面為淺色模式 以及與Nats連線
     * @memberof LoginComponent
     */
    async ngOnInit() {
        this.branchesOption = Object.values(branchData)[0];
        await this.#wsNatsService.connect();
        const themeLink = document.getElementById('theme-css');
        themeLink.href = 'app/styles/theme.css';
    }
    /** 點擊登入按鈕
     * @memberof LoginComponent
     */
    onLoginClick() {
        try {
            this.loginReq.passwordHash = this.#loginService.getHashPassword(this.password);
            this.#loginService.getUserToken(this.loginReq).subscribe(x => {
                this.userToken = x;
                this.checkUserToken(this.userToken);
                this.getUserProfile(this.userToken);
            });
        }
        catch (error) {
            this.messageService.add({ severity: 'error', summary: 'Error', detail: this.#translateService.instant('登入失敗') });
        }
    }
    /** 檢查有無登入授權
     * @param {UserToken} userToken
     * @memberof LoginComponent
     */
    checkUserToken(userToken) {
        if (userToken.token !== '') {
            this.#sharedService.sharedValue = null;
            this.#loginService.getUserAccount(userToken.userCode.code).subscribe(x => {
                this.userAccount = x;
                this.userAccountService.userAccount.set(x);
                console.log("this.userAccountService.userAccount<========", this.userAccountService.userAccount());
                // const key = this.#sharedService.setValue(this.userAccount)
                // this.router.navigate(['/home'], { state: { token: key } });
                this.router.navigate(['/home']);
            });
        }
        else {
            this.messageService.add({ severity: 'error', summary: 'Error', detail: this.#translateService.instant('帳號或密碼錯誤') });
        }
    }
    /** 檢查授權拿到User Profile
   * @param {UserToken} userToken
   * @memberof LoginComponent
   */
    getUserProfile(userToken) {
        if (userToken.token !== '') {
            this.userProfileService.getUserProfile(userToken.userCode.code, "app-portal")
                .subscribe((x) => {
                this.userProfileService.userProfile.set(x);
            });
        }
    }
    /** 點擊忘記密碼
     * @memberof LoginComponent
     */
    onForgotClick() {
        this.isVisibleForgot = true;
    }
    /** 關閉忘記密碼視窗
     * @memberof LoginComponent
     */
    onHideForgot() {
        this.isVisibleForgot = false;
    }
    /** 關閉重置密碼視窗
     * @memberof LoginComponent
     */
    onHideReset() {
        this.isVisibleReset = false;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.8", ngImport: i0, type: LoginComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.8", type: LoginComponent, isStandalone: true, selector: "his-login", inputs: { token: "token" }, providers: [MessageService], ngImport: i0, template: "<div class=\"login-page-container\">\n  <div class=\"login-container\">\n    <div class=\"welcome-container\">\n    <div class=\"welcome-style\">Welcome!</div>\n  </div>\n    <div class=\"logo-container\">\n      <img src=\"assets/companyLogo.png\" alt=\"Image\" />\n    </div>\n\n    <div class=\"title-style\">\u96F2\u884C\u81F3\u5584\u91AB\u7642\u7CFB\u7D71</div>\n\n\n    <div class=\"form-container\">\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"branchSelector\">{{'\u9662\u5340'|translate}}</label>\n        <p-dropdown\n          id=\"branchSelector\"\n          [options]=\"branchesOption\"\n          [(ngModel)]=\"loginReq.orgNo\"\n          [placeholder]=\"'\u8ACB\u9078\u64C7\u9662\u5340' | translate\"\n        >\n      </p-dropdown>\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"UserName\">{{'\u5E33\u865F'|translate}}</label>\n        <input\n          pInputText\n          id=\"UserName\"\n          type=\"text\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5E33\u865F' | translate\"\n          [(ngModel)]=\"loginReq.userCode.code\"\n          class=\"p-inputtext p-element p-component\"\n        />\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"Password\">{{'\u5BC6\u78BC'|translate}}</label>\n        <p-password\n          id=\"password\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5BC6\u78BC' | translate\"\n          [(ngModel)]=\"password\"\n          [feedback]=\"false\"\n          (keyup.enter)=\"onLoginClick()\"\n          class=\"p-fluid\"\n        ></p-password>\n      </div>\n      <div class=\"button-group\">\n        <p-button [label]=\"'\u5FD8\u8A18\u5BC6\u78BC' | translate\" styleClass=\"p-button-link\" (onClick)=\"onForgotClick()\"></p-button>\n        <button pButton pRipple-label [label]=\"'\u767B\u5165' | translate\" (click)=\"onLoginClick()\"> </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"image-container\">\n    <div class=\"image-box\">\n      <img src=\"assets/loginImage.png\" class=\"image-style\" alt=\"Image\" />\n    </div>\n  </div>\n</div>\n<p-toast></p-toast>\n\n<his-forgot-password (hideForgot)=\"onHideForgot()\" [isVisibleForgot]=isVisibleForgot></his-forgot-password>\n<his-reset-password (hideReset)=\"onHideReset()\" [isVisibleReset]=isVisibleReset [token]=\"token\"></his-reset-password>\n\n", styles: [":host ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem}:host ::ng-deep .p-dropdown,:host ::ng-deep .p-inputtext{width:100%;background:var(--white)!important}:host ::ng-deep .button-group{display:flex;gap:var(--spacing-lg)}:host ::ng-deep .button-group .p-button{max-width:142px;width:calc(50% - 8px)}:host ::ng-deep .button-group p-button{width:calc(50% - 8px)}:host ::ng-deep .button-group p-button .p-button{width:100%}:host ::ng-deep .p-dropdown{border-color:var(--outline);max-height:40px}:host ::ng-deep .p-dropdown .p-inputtext{padding:10px 16px}input:-webkit-autofill{-webkit-box-shadow:0 0 0 40px white inset!important}.login-page-container{width:100%;height:100%;display:flex}.login-container{width:33%;height:100%;padding:var(--spacing-xxl);display:flex;flex-direction:column;align-items:center;background-color:var(--surface-card)}.welcome-container{position:relative;width:100%;display:flex}.welcome-style{color:#13141461;font-size:32px;font-style:normal;font-weight:700;line-height:44px;letter-spacing:1.28px}.logo-container{width:44.79%;object-fit:cover;padding:var(--spacing-xxl) 0}.logo-container img{width:100%;display:block}.form-container{width:52%;min-width:250px;display:flex;flex-direction:column;justify-content:center;gap:var(--spacing-lg)}.title-style{font-size:24px;font-style:normal;font-weight:700;line-height:32px;display:flex;justify-content:center;padding-bottom:var(--spacing-xxl)}.input-text{display:flex;flex-direction:column;gap:8px}.input-label{color:var(--surface-on-surface);font-size:20px;font-style:normal;font-weight:700;line-height:28px;letter-spacing:.4px}.button-group{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-lg)}.image-container{width:67%;height:100%}.image-box{width:100%;height:100%}.image-style{width:100%;height:100%;object-fit:cover;display:block}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: ButtonModule }, { kind: "directive", type: i1.ButtonDirective, selector: "[pButton]", inputs: ["iconPos", "loadingIcon", "label", "icon", "loading"] }, { kind: "component", type: i1.Button, selector: "p-button", inputs: ["type", "iconPos", "icon", "badge", "label", "disabled", "loading", "loadingIcon", "style", "styleClass", "badgeClass", "ariaLabel"], outputs: ["onClick", "onFocus", "onBlur"] }, { kind: "ngmodule", type: PasswordModule }, { kind: "component", type: i2.Password, selector: "p-password", inputs: ["ariaLabel", "ariaLabelledBy", "label", "disabled", "promptLabel", "mediumRegex", "strongRegex", "weakLabel", "mediumLabel", "maxLength", "strongLabel", "inputId", "feedback", "appendTo", "toggleMask", "inputStyleClass", "styleClass", "style", "inputStyle", "showTransitionOptions", "hideTransitionOptions", "autocomplete", "placeholder", "showClear"], outputs: ["onFocus", "onBlur", "onClear"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: ImageModule }, { kind: "ngmodule", type: DropdownModule }, { kind: "component", type: i4.Dropdown, selector: "p-dropdown", inputs: ["scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "dataKey", "filterBy", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "lazy", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "overlayOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "disabled", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "filterValue", "options"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear", "onLazyLoad"] }, { kind: "ngmodule", type: ToastModule }, { kind: "component", type: i5.Toast, selector: "p-toast", inputs: ["key", "autoZIndex", "baseZIndex", "life", "style", "styleClass", "position", "preventOpenDuplicates", "preventDuplicates", "showTransformOptions", "hideTransformOptions", "showTransitionOptions", "hideTransitionOptions", "breakpoints"], outputs: ["onClose"] }, { kind: "component", type: ForgotPasswordComponent, selector: "his-forgot-password", inputs: ["isVisibleForgot"], outputs: ["hideForgot"] }, { kind: "component", type: ResetPasswordComponent, selector: "his-reset-password", inputs: ["isVisibleReset", "token"], outputs: ["hideReset"] }, { kind: "ngmodule", type: InputTextModule }, { kind: "directive", type: i6.InputText, selector: "[pInputText]" }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i7.TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.8", ngImport: i0, type: LoginComponent, decorators: [{
            type: Component,
            args: [{ selector: 'his-login', standalone: true, providers: [MessageService], imports: [CommonModule,
                        ButtonModule,
                        PasswordModule,
                        FormsModule,
                        RouterLink,
                        ImageModule,
                        DropdownModule,
                        ToastModule,
                        ForgotPasswordComponent,
                        ResetPasswordComponent,
                        InputTextModule,
                        TranslateModule
                    ], template: "<div class=\"login-page-container\">\n  <div class=\"login-container\">\n    <div class=\"welcome-container\">\n    <div class=\"welcome-style\">Welcome!</div>\n  </div>\n    <div class=\"logo-container\">\n      <img src=\"assets/companyLogo.png\" alt=\"Image\" />\n    </div>\n\n    <div class=\"title-style\">\u96F2\u884C\u81F3\u5584\u91AB\u7642\u7CFB\u7D71</div>\n\n\n    <div class=\"form-container\">\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"branchSelector\">{{'\u9662\u5340'|translate}}</label>\n        <p-dropdown\n          id=\"branchSelector\"\n          [options]=\"branchesOption\"\n          [(ngModel)]=\"loginReq.orgNo\"\n          [placeholder]=\"'\u8ACB\u9078\u64C7\u9662\u5340' | translate\"\n        >\n      </p-dropdown>\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"UserName\">{{'\u5E33\u865F'|translate}}</label>\n        <input\n          pInputText\n          id=\"UserName\"\n          type=\"text\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5E33\u865F' | translate\"\n          [(ngModel)]=\"loginReq.userCode.code\"\n          class=\"p-inputtext p-element p-component\"\n        />\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"Password\">{{'\u5BC6\u78BC'|translate}}</label>\n        <p-password\n          id=\"password\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5BC6\u78BC' | translate\"\n          [(ngModel)]=\"password\"\n          [feedback]=\"false\"\n          (keyup.enter)=\"onLoginClick()\"\n          class=\"p-fluid\"\n        ></p-password>\n      </div>\n      <div class=\"button-group\">\n        <p-button [label]=\"'\u5FD8\u8A18\u5BC6\u78BC' | translate\" styleClass=\"p-button-link\" (onClick)=\"onForgotClick()\"></p-button>\n        <button pButton pRipple-label [label]=\"'\u767B\u5165' | translate\" (click)=\"onLoginClick()\"> </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"image-container\">\n    <div class=\"image-box\">\n      <img src=\"assets/loginImage.png\" class=\"image-style\" alt=\"Image\" />\n    </div>\n  </div>\n</div>\n<p-toast></p-toast>\n\n<his-forgot-password (hideForgot)=\"onHideForgot()\" [isVisibleForgot]=isVisibleForgot></his-forgot-password>\n<his-reset-password (hideReset)=\"onHideReset()\" [isVisibleReset]=isVisibleReset [token]=\"token\"></his-reset-password>\n\n", styles: [":host ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem}:host ::ng-deep .p-dropdown,:host ::ng-deep .p-inputtext{width:100%;background:var(--white)!important}:host ::ng-deep .button-group{display:flex;gap:var(--spacing-lg)}:host ::ng-deep .button-group .p-button{max-width:142px;width:calc(50% - 8px)}:host ::ng-deep .button-group p-button{width:calc(50% - 8px)}:host ::ng-deep .button-group p-button .p-button{width:100%}:host ::ng-deep .p-dropdown{border-color:var(--outline);max-height:40px}:host ::ng-deep .p-dropdown .p-inputtext{padding:10px 16px}input:-webkit-autofill{-webkit-box-shadow:0 0 0 40px white inset!important}.login-page-container{width:100%;height:100%;display:flex}.login-container{width:33%;height:100%;padding:var(--spacing-xxl);display:flex;flex-direction:column;align-items:center;background-color:var(--surface-card)}.welcome-container{position:relative;width:100%;display:flex}.welcome-style{color:#13141461;font-size:32px;font-style:normal;font-weight:700;line-height:44px;letter-spacing:1.28px}.logo-container{width:44.79%;object-fit:cover;padding:var(--spacing-xxl) 0}.logo-container img{width:100%;display:block}.form-container{width:52%;min-width:250px;display:flex;flex-direction:column;justify-content:center;gap:var(--spacing-lg)}.title-style{font-size:24px;font-style:normal;font-weight:700;line-height:32px;display:flex;justify-content:center;padding-bottom:var(--spacing-xxl)}.input-text{display:flex;flex-direction:column;gap:8px}.input-label{color:var(--surface-on-surface);font-size:20px;font-style:normal;font-weight:700;line-height:28px;letter-spacing:.4px}.button-group{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-lg)}.image-container{width:67%;height:100%}.image-box{width:100%;height:100%}.image-style{width:100%;height:100%;object-fit:cover;display:block}\n"] }]
        }], propDecorators: { token: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdXNlci1sb2dpbi9zcmMvbGliL2xvZ2luLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL3VzZXItbG9naW4vc3JjL2xpYi9sb2dpbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDckQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUM3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDakQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFlLFNBQVMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQTtBQUN6RCxPQUFPLEVB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O2lCQUN4RSxTQUFTLENBQUMsQ0FBQyxDQUFjLEVBQUUsRUFBRTtnQkFDNUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0MsQ0FBQyxDQUFDLENBQUE7U0FDUDtJQUNILENBQUM7SUFFSDs7T0FFRztJQUNILGFBQWE7UUFDWCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztJQUM5QixDQUFDO0lBRUQ7O09BRUc7SUFDSCxZQUFZO1FBQ1YsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7SUFDL0IsQ0FBQztJQUVEOztPQUVHO0lBQ0gsV0FBVztRQUNULElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBQzlCLENBQUM7OEdBM0lVLGNBQWM7a0dBQWQsY0FBYyxvRkFmZCxDQUFDLGNBQWMsQ0FBQywwQkM1QjdCLHUzRUE4REEsbTVERGpDWSxZQUFZLDhCQUNwQixZQUFZLDhaQUNaLGNBQWMscWZBQ2QsV0FBVyw4bUJBRVgsV0FBVyw4QkFDWCxjQUFjLCtpQ0FDZCxXQUFXLHdXQUNYLHVCQUF1QixzSEFDdkIsc0JBQXNCLDJIQUN0QixlQUFlLG1HQUNmLGVBQWU7OzJGQUdOLGNBQWM7a0JBcEIxQixTQUFTOytCQUNFLFdBQVcsY0FDVCxJQUFJLGFBR0wsQ0FBQyxjQUFjLENBQUMsV0FDbEIsQ0FBQyxZQUFZO3dCQUNwQixZQUFZO3dCQUNaLGNBQWM7d0JBQ2QsV0FBVzt3QkFDWCxVQUFVO3dCQUNWLFdBQVc7d0JBQ1gsY0FBYzt3QkFDZCxXQUFXO3dCQUNYLHVCQUF1Qjt3QkFDdkIsc0JBQXNCO3dCQUN0QixlQUFlO3dCQUNmLGVBQWU7cUJBQ2hCOzhCQVFRLEtBQUs7c0JBQWIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgaW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSW1hZ2VNb2R1bGUgfSBmcm9tICdwcmltZW5nL2ltYWdlJztcbmltcG9ydCB7IERyb3Bkb3duTW9kdWxlIH0gZnJvbSAncHJpbWVuZy9kcm9wZG93bic7XG5pbXBvcnQgeyBUb2FzdE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvdG9hc3QnO1xuaW1wb3J0IHsgQnV0dG9uTW9kdWxlIH0gZnJvbSAncHJpbWVuZy9idXR0b24nO1xuaW1wb3J0IHsgUGFzc3dvcmRNb2R1bGUgfSBmcm9tICdwcmltZW5nL3Bhc3N3b3JkJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgUm91dGVyLCBSb3V0ZXJMaW5rIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE1lc3NhZ2VTZXJ2aWNlIH0gZnJvbSAncHJpbWVuZy9hcGknO1xuaW1wb3J0IHsgU2hhcmVkU2VydmljZSB9IGZyb20gJ0BoaXMtYmFzZS9zaGFyZWQnO1xuaW1wb3J0IHsgTG9naW5TZXJ2aWNlIH0gZnJvbSAnLi9sb2dpbi5zZXJ2aWNlJztcbmltcG9ydCB7IFdzTmF0c1NlcnZpY2UgfSBmcm9tICcuL3dzLW5hdHMuc2VydmljZSc7XG5pbXBvcnQgeyBVc2VyQWNjb3VudCwgVXNlclByb2ZpbGUsIFVzZXJUb2tlbiB9IGZyb20gJ0BoaXMtdmlld21vZGVsL2FwcC1wb3J0YWwvZGlzdCc7XG5pbXBvcnQgeyBMb2dpblJlcSB9IGZyb20gJ0BoaXMtdmlld21vZGVsL2FwcC1wb3J0YWwvZGlzdCdcbmltcG9ydCB7IEZvcmdvdFBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSBcIi4vZm9yZ290LXBhc3N3b3JkL2ZvcmdvdC1wYXNzd29yZC5jb21wb25lbnRcIjtcbmltcG9ydCB7IFJlc2V0UGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICcuL3Jlc2V0LXBhc3N3b3JkL3Jlc2V0LXBhc3N3b3JkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBJbnB1dFRleHRNb2R1bGUgfSBmcm9tICdwcmltZW5nL2lucHV0dGV4dCc7XG5pbXBvcnQgKiBhcyBicmFuY2hEYXRhIGZyb20gJy4uL2Fzc2V0cy9kYXRhL2JyYW5jaGVzTmFtZS5qc29uJ1xuaW1wb3J0ICdAYW5ndWxhci9sb2NhbGl6ZS9pbml0JztcbmltcG9ydCB7IFRyYW5zbGF0ZU1vZHVsZSwgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgVXNlckFjY291bnRTZXJ2aWNlLCBVc2VyUHJvZmlsZVNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlJztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2hpcy1sb2dpbicsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIHRlbXBsYXRlVXJsOiAnLi9sb2dpbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xvZ2luLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW01lc3NhZ2VTZXJ2aWNlXSxcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSxcbiAgICBCdXR0b25Nb2R1bGUsXG4gICAgUGFzc3dvcmRNb2R1bGUsXG4gICAgRm9ybXNNb2R1bGUsXG4gICAgUm91dGVyTGluayxcbiAgICBJbWFnZU1vZHVsZSxcbiAgICBEcm9wZG93bk1vZHVsZSxcbiAgICBUb2FzdE1vZHVsZSxcbiAgICBGb3Jnb3RQYXNzd29yZENvbXBvbmVudCxcbiAgICBSZXNldFBhc3N3b3JkQ29tcG9uZW50LFxuICAgIElucHV0VGV4dE1vZHVsZSxcbiAgICBUcmFuc2xhdGVNb2R1bGVcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBMb2dpbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgLyoqIOWKoOWvhuitmOWIpXRva2VuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgQElucHV0KCkgdG9rZW4hOiBzdHJpbmc7XG5cbiAgLyoqIOmZouWNgOmBuOmghVxuICAgKiBAdHlwZSB7c3RyaW5nW119XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgYnJhbmNoZXNPcHRpb246IHN0cmluZ1tdID0gW107XG5cbiAgLyoqIOi8uOWFpeeahOWvhueivFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIHBhc3N3b3JkOiBzdHJpbmcgPSAnJztcblxuICAvKiog55m75YWl6LOH6KiKXG4gICAqIEB0eXBlIHtMb2dpblJlcX1cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBsb2dpblJlcTogTG9naW5SZXEgPSBuZXcgTG9naW5SZXEoKTtcblxuICAvKiog5L2/55So6ICF5qyK5p2WXG4gICAqIEB0eXBlIHtVc2VyVG9rZW59XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgdXNlclRva2VuOiBVc2VyVG9rZW4gPSBuZXcgVXNlclRva2VuKCk7XG5cbiAgLyoqIOW/mOiomOWvhueivOmggemdoumhr+ekuuiIh+WQplxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBpc1Zpc2libGVGb3Jnb3Q6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKiog6YeN572u5a+G56K86aCB6Z2i6aGv56S66IiH5ZCmXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIGlzVmlzaWJsZVJlc2V0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqIOS9v+eUqOiAheW4s+iZn+izh+ioilxuICAgKiBAdHlwZSB7VXNlckFjY291bnR9XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgdXNlckFjY291bnQ6IFVzZXJBY2NvdW50ID0gbmV3IFVzZXJBY2NvdW50KCk7XG5cbiAgbWVzc2FnZVNlcnZpY2UgPSBpbmplY3QoTWVzc2FnZVNlcnZpY2UpO1xuICByb3V0ZXIgPSBpbmplY3QoUm91dGVyKTtcbiAgdXNlckFjY291bnRTZXJ2aWNlID0gaW5qZWN0KFVzZXJBY2NvdW50U2VydmljZSk7XG4gIHVzZXJQcm9maWxlU2VydmljZSA9IGluamVjdChVc2VyUHJvZmlsZVNlcnZpY2UpO1xuICAjbG9naW5TZXJ2aWNlID0gaW5qZWN0KExvZ2luU2VydmljZSk7XG4gICN3c05hdHNTZXJ2aWNlID0gaW5qZWN0KFdzTmF0c1NlcnZpY2UpO1xuICAjc2hhcmVkU2VydmljZSA9IGluamVjdChTaGFyZWRTZXJ2aWNlKTtcbiAgI3RyYW5zbGF0ZVNlcnZpY2UgPSBpbmplY3QoVHJhbnNsYXRlU2VydmljZSlcblxuICAvKiog5Yid5aeL5YyW55m75YWl55Wr6Z2i54K65re66Imy5qih5byPIOS7peWPiuiIh05hdHPpgKPnt5pcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBhc3luYyBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmJyYW5jaGVzT3B0aW9uID0gT2JqZWN0LnZhbHVlcyhicmFuY2hEYXRhKVswXSBhcyB1bmtub3duIGFzIHN0cmluZ1tdXG4gICAgYXdhaXQgdGhpcy4jd3NOYXRzU2VydmljZS5jb25uZWN0KCk7XG4gICAgY29uc3QgdGhlbWVMaW5rID0gPEhUTUxMaW5rRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWUtY3NzJylcbiAgICB0aGVtZUxpbmsuaHJlZiA9ICdhcHAvc3R5bGVzL3RoZW1lLmNzcydcbiAgfVxuXG4gIC8qKiDpu57mk4rnmbvlhaXmjInpiJVcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkxvZ2luQ2xpY2soKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9naW5SZXEucGFzc3dvcmRIYXNoID0gdGhpcy4jbG9naW5TZXJ2aWNlLmdldEhhc2hQYXNzd29yZCh0aGlzLnBhc3N3b3JkKTtcbiAgICAgIHRoaXMuI2xvZ2luU2VydmljZS5nZXRVc2VyVG9rZW4odGhpcy5sb2dpblJlcSkuc3Vic2NyaWJlKHggPT4ge1xuICAgICAgICB0aGlzLnVzZXJUb2tlbiA9IHhcbiAgICAgICAgdGhpcy5jaGVja1VzZXJUb2tlbih0aGlzLnVzZXJUb2tlbik7XG4gICAgICAgIHRoaXMuZ2V0VXNlclByb2ZpbGUodGhpcy51c2VyVG9rZW4pO1xuICAgICAgfSlcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLmFkZCh7IHNldmVyaXR5OiAnZXJyb3InLCBzdW1tYXJ5OiAnRXJyb3InLCBkZXRhaWw6IHRoaXMuI3RyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgn55m75YWl5aSx5pWXJykgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIOaqouafpeacieeEoeeZu+WFpeaOiOasilxuICAgKiBAcGFyYW0ge1VzZXJUb2tlbn0gdXNlclRva2VuXG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgY2hlY2tVc2VyVG9rZW4odXNlclRva2VuOiBVc2VyVG9rZW4pIHtcbiAgICBpZiAodXNlclRva2VuLnRva2VuICE9PSAnJykge1xuICAgICAgdGhpcy4jc2hhcmVkU2VydmljZS5zaGFyZWRWYWx1ZSA9IG51bGw7XG4gICAgICB0aGlzLiNsb2dpblNlcnZpY2UuZ2V0VXNlckFjY291bnQodXNlclRva2VuLnVzZXJDb2RlLmNvZGUpLnN1YnNjcmliZSh4ID0+IHtcbiAgICAgICAgdGhpcy51c2VyQWNjb3VudCA9IHhcbiAgICAgICAgdGhpcy51c2VyQWNjb3VudFNlcnZpY2UudXNlckFjY291bnQuc2V0KHgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcInRoaXMudXNlckFjY291bnRTZXJ2aWNlLnVzZXJBY2NvdW50PD09PT09PT09XCIsdGhpcy51c2VyQWNjb3VudFNlcnZpY2UudXNlckFjY291bnQoKSlcbiAgICAgICAgLy8gY29uc3Qga2V5ID0gdGhpcy4jc2hhcmVkU2VydmljZS5zZXRWYWx1ZSh0aGlzLnVzZXJBY2NvdW50KVxuICAgICAgICAvLyB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9ob21lJ10sIHsgc3RhdGU6IHsgdG9rZW46IGtleSB9IH0pO1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9ob21lJ10pO1xuICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLmFkZCh7IHNldmVyaXR5OiAnZXJyb3InLCBzdW1tYXJ5OiAnRXJyb3InLCBkZXRhaWw6IHRoaXMuI3RyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgn5biz6Jmf5oiW5a+G56K86Yyv6KqkJykgfSk7XG4gICAgfVxuICB9XG5cbiAgICAvKiog5qqi5p+l5o6I5qyK5ou/5YiwVXNlciBQcm9maWxlXG4gICAqIEBwYXJhbSB7VXNlclRva2VufSB1c2VyVG9rZW5cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICAgIGdldFVzZXJQcm9maWxlKHVzZXJUb2tlbjogVXNlclRva2VuKSB7XG4gICAgICBpZiAodXNlclRva2VuLnRva2VuICE9PSAnJykge1xuICAgICAgICB0aGlzLnVzZXJQcm9maWxlU2VydmljZS5nZXRVc2VyUHJvZmlsZSh1c2VyVG9rZW4udXNlckNvZGUuY29kZSwgXCJhcHAtcG9ydGFsXCIpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh4OiBVc2VyUHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnVzZXJQcm9maWxlU2VydmljZS51c2VyUHJvZmlsZS5zZXQoeCk7XG4gICAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAvKiog6bue5pOK5b+Y6KiY5a+G56K8XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgb25Gb3Jnb3RDbGljaygpIHtcbiAgICB0aGlzLmlzVmlzaWJsZUZvcmdvdCA9IHRydWU7XG4gIH1cblxuICAvKiog6Zec6ZaJ5b+Y6KiY5a+G56K86KaW56qXXG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgb25IaWRlRm9yZ290KCkge1xuICAgIHRoaXMuaXNWaXNpYmxlRm9yZ290ID0gZmFsc2U7XG4gIH1cblxuICAvKiog6Zec6ZaJ6YeN572u5a+G56K86KaW56qXXG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgb25IaWRlUmVzZXQoKSB7XG4gICAgdGhpcy5pc1Zpc2libGVSZXNldCA9IGZhbHNlO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwibG9naW4tcGFnZS1jb250YWluZXJcIj5cbiAgPGRpdiBjbGFzcz1cImxvZ2luLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgY2xhc3M9XCJ3ZWxjb21lLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgY2xhc3M9XCJ3ZWxjb21lLXN0eWxlXCI+V2VsY29tZSE8L2Rpdj5cbiAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImxvZ28tY29udGFpbmVyXCI+XG4gICAgICA8aW1nIHNyYz1cImFzc2V0cy9jb21wYW55TG9nby5wbmdcIiBhbHQ9XCJJbWFnZVwiIC8+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwidGl0bGUtc3R5bGVcIj7pm7LooYzoh7PlloTphqvnmYLns7vntbE8L2Rpdj5cblxuXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtdGV4dFwiPlxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJpbnB1dC1sYWJlbFwiIGh0bWxGb3I9XCJicmFuY2hTZWxlY3RvclwiPnt7J+mZouWNgCd8dHJhbnNsYXRlfX08L2xhYmVsPlxuICAgICAgICA8cC1kcm9wZG93blxuICAgICAgICAgIGlkPVwiYnJhbmNoU2VsZWN0b3JcIlxuICAgICAgICAgIFtvcHRpb25zXT1cImJyYW5jaGVzT3B0aW9uXCJcbiAgICAgICAgICBbKG5nTW9kZWwpXT1cImxvZ2luUmVxLm9yZ05vXCJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiJ+iri+mBuOaTh+mZouWNgCcgfCB0cmFuc2xhdGVcIlxuICAgICAgICA+XG4gICAgICA8L3AtZHJvcGRvd24+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC10ZXh0XCI+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImlucHV0LWxhYmVsXCIgaHRtbEZvcj1cIlVzZXJOYW1lXCI+e3sn5biz6JmfJ3x0cmFuc2xhdGV9fTwvbGFiZWw+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHBJbnB1dFRleHRcbiAgICAgICAgICBpZD1cIlVzZXJOYW1lXCJcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgW3BsYWNlaG9sZGVyXT1cIifoq4vovLjlhaXluLPomZ8nIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICBbKG5nTW9kZWwpXT1cImxvZ2luUmVxLnVzZXJDb2RlLmNvZGVcIlxuICAgICAgICAgIGNsYXNzPVwicC1pbnB1dHRleHQgcC1lbGVtZW50IHAtY29tcG9uZW50XCJcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0LXRleHRcIj5cbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiaW5wdXQtbGFiZWxcIiBodG1sRm9yPVwiUGFzc3dvcmRcIj57eyflr4bnorwnfHRyYW5zbGF0ZX19PC9sYWJlbD5cbiAgICAgICAgPHAtcGFzc3dvcmRcbiAgICAgICAgICBpZD1cInBhc3N3b3JkXCJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiJ+iri+i8uOWFpeWvhueivCcgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgIFsobmdNb2RlbCldPVwicGFzc3dvcmRcIlxuICAgICAgICAgIFtmZWVkYmFja109XCJmYWxzZVwiXG4gICAgICAgICAgKGtleXVwLmVudGVyKT1cIm9uTG9naW5DbGljaygpXCJcbiAgICAgICAgICBjbGFzcz1cInAtZmx1aWRcIlxuICAgICAgICA+PC9wLXBhc3N3b3JkPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uLWdyb3VwXCI+XG4gICAgICAgIDxwLWJ1dHRvbiBbbGFiZWxdPVwiJ+W/mOiomOWvhueivCcgfCB0cmFuc2xhdGVcIiBzdHlsZUNsYXNzPVwicC1idXR0b24tbGlua1wiIChvbkNsaWNrKT1cIm9uRm9yZ290Q2xpY2soKVwiPjwvcC1idXR0b24+XG4gICAgICAgIDxidXR0b24gcEJ1dHRvbiBwUmlwcGxlLWxhYmVsIFtsYWJlbF09XCIn55m75YWlJyB8IHRyYW5zbGF0ZVwiIChjbGljayk9XCJvbkxvZ2luQ2xpY2soKVwiPiA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImltYWdlLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgY2xhc3M9XCJpbWFnZS1ib3hcIj5cbiAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2xvZ2luSW1hZ2UucG5nXCIgY2xhc3M9XCJpbWFnZS1zdHlsZVwiIGFsdD1cIkltYWdlXCIgLz5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbjxwLXRvYXN0PjwvcC10b2FzdD5cblxuPGhpcy1mb3Jnb3QtcGFzc3dvcmQgKGhpZGVGb3Jnb3QpPVwib25IaWRlRm9yZ290KClcIiBbaXNWaXNpYmxlRm9yZ290XT1pc1Zpc2libGVGb3Jnb3Q+PC9oaXMtZm9yZ290LXBhc3N3b3JkPlxuPGhpcy1yZXNldC1wYXNzd29yZCAoaGlkZVJlc2V0KT1cIm9uSGlkZVJlc2V0KClcIiBbaXNWaXNpYmxlUmVzZXRdPWlzVmlzaWJsZVJlc2V0IFt0b2tlbl09XCJ0b2tlblwiPjwvaGlzLXJlc2V0LXBhc3N3b3JkPlxuXG4iXX0=