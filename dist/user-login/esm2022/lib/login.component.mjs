/* eslint-disable @typescript-eslint/no-non-null-assertion */
import { Component, Input, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ImageModule } from 'primeng/image';
import { DropdownModule } from 'primeng/dropdown';
import { ToastModule } from 'primeng/toast';
import { ButtonModule } from 'primeng/button';
import { PasswordModule } from 'primeng/password';
import { FormsModule } from '@angular/forms';
import { Router, RouterLink } from '@angular/router';
import { MessageService } from 'primeng/api';
import { SharedService } from '@his-base/shared';
import { LoginService } from './login.service';
import { WsNatsService } from './ws-nats.service';
import { UserAccount, UserToken } from '@his-viewmodel/app-portal/dist';
import { LoginReq } from '@his-viewmodel/app-portal/dist';
import { ForgotPasswordComponent } from "./forgot-password/forgot-password.component";
import { ResetPasswordComponent } from './reset-password/reset-password.component';
import { InputTextModule } from 'primeng/inputtext';
import * as branchData from '../assets/data/branchesName.json';
import '@angular/localize/init';
import { TranslateModule, TranslateService } from '@ngx-translate/core';
import { UserAccountService, UserProfileService } from 'service';
import * as i0 from "@angular/core";
import * as i1 from "primeng/button";
import * as i2 from "primeng/password";
import * as i3 from "@angular/forms";
import * as i4 from "primeng/dropdown";
import * as i5 from "primeng/toast";
import * as i6 from "primeng/inputtext";
import * as i7 from "@ngx-translate/core";
export class LoginComponent {
    constructor() {
        /** 院區選項
         * @type {string[]}
         * @memberof LoginComponent
         */
        this.branchesOption = [];
        /** 輸入的密碼
         * @type {string}
         * @memberof LoginComponent
         */
        this.password = '';
        /** 登入資訊
         * @type {LoginReq}
         * @memberof LoginComponent
         */
        this.loginReq = new LoginReq();
        /** 使用者權杖
         * @type {UserToken}
         * @memberof LoginComponent
         */
        this.userToken = new UserToken();
        /** 忘記密碼頁面顯示與否
         * @type {boolean}
         * @memberof LoginComponent
         */
        this.isVisibleForgot = false;
        /** 重置密碼頁面顯示與否
         * @type {boolean}
         * @memberof LoginComponent
         */
        this.isVisibleReset = false;
        /** 使用者帳號資訊
         * @type {UserAccount}
         * @memberof LoginComponent
         */
        this.userAccount = new UserAccount();
        this.messageService = inject(MessageService);
        this.router = inject(Router);
        this.userAccountService = inject(UserAccountService);
        this.userProfileService = inject(UserProfileService);
        this.#loginService = inject(LoginService);
        this.#wsNatsService = inject(WsNatsService);
        this.#sharedService = inject(SharedService);
        this.#translateService = inject(TranslateService);
    }
    #loginService;
    #wsNatsService;
    #sharedService;
    #translateService;
    /** 初始化登入畫面為淺色模式 以及與Nats連線
     * @memberof LoginComponent
     */
    async ngOnInit() {
        this.branchesOption = Object.values(branchData)[0];
        await this.#wsNatsService.connect();
        const themeLink = document.getElementById('theme-css');
        themeLink.href = 'app/styles/theme-light.css';
    }
    /** 點擊登入按鈕
     * @memberof LoginComponent
     */
    onLoginClick() {
        try {
            this.loginReq.passwordHash = this.#loginService.getHashPassword(this.password);
            this.#loginService.getUserToken(this.loginReq).subscribe(x => {
                this.userToken = x;
                this.checkUserToken(this.userToken);
                this.getUserProfile(this.userToken);
            });
        }
        catch (error) {
            this.messageService.add({ severity: 'error', summary: 'Error', detail: this.#translateService.instant('登入失敗') });
        }
    }
    /** 檢查有無登入授權
     * @param {UserToken} userToken
     * @memberof LoginComponent
     */
    checkUserToken(userToken) {
        if (userToken.token !== '') {
            this.#sharedService.sharedValue = null;
            this.#loginService.getUserAccount(userToken.userCode.code).subscribe(x => {
                this.userAccount = x;
                this.userAccountService.userAccount.set(x);
                this.router.navigate(['/home']);
            });
        }
        else {
            this.messageService.add({ severity: 'error', summary: 'Error', detail: this.#translateService.instant('帳號或密碼錯誤') });
        }
    }
    /** 檢查授權拿到User Profile
   * @param {UserToken} userToken
   * @memberof LoginComponent
   */
    getUserProfile(userToken) {
        if (userToken.token !== '') {
            this.userProfileService.getUserProfile(userToken.userCode.code, "app-portal")
                .subscribe((x) => {
                this.userProfileService.userProfile.set(x);
            });
        }
    }
    /** 點擊忘記密碼
     * @memberof LoginComponent
     */
    onForgotClick() {
        this.isVisibleForgot = true;
    }
    /** 關閉忘記密碼視窗
     * @memberof LoginComponent
     */
    onHideForgot() {
        this.isVisibleForgot = false;
    }
    /** 關閉重置密碼視窗
     * @memberof LoginComponent
     */
    onHideReset() {
        this.isVisibleReset = false;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.9", ngImport: i0, type: LoginComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.9", type: LoginComponent, isStandalone: true, selector: "his-login", inputs: { token: "token" }, providers: [MessageService], ngImport: i0, template: "<div class=\"login-page-container\">\n  <div class=\"login-container\">\n    <div class=\"welcome-container\">\n    <div class=\"welcome-style\">Welcome!</div>\n  </div>\n    <div class=\"logo-container\">\n      <img src=\"assets/companyLogo.png\" alt=\"Image\" />\n    </div>\n\n    <div class=\"title-style\">\u96F2\u884C\u81F3\u5584\u91AB\u7642\u7CFB\u7D71</div>\n\n\n    <div class=\"form-container\">\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"branchSelector\">{{'\u9662\u5340'|translate}}</label>\n        <p-dropdown\n          id=\"branchSelector\"\n          [options]=\"branchesOption\"\n          [(ngModel)]=\"loginReq.orgNo\"\n          [placeholder]=\"'\u8ACB\u9078\u64C7\u9662\u5340' | translate\"\n        >\n      </p-dropdown>\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"UserName\">{{'\u5E33\u865F'|translate}}</label>\n        <input\n          pInputText\n          id=\"UserName\"\n          type=\"text\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5E33\u865F' | translate\"\n          [(ngModel)]=\"loginReq.userCode.code\"\n          class=\"p-inputtext p-element p-component\"\n        />\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"Password\">{{'\u5BC6\u78BC'|translate}}</label>\n        <p-password\n          id=\"password\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5BC6\u78BC' | translate\"\n          [(ngModel)]=\"password\"\n          [feedback]=\"false\"\n          (keyup.enter)=\"onLoginClick()\"\n          class=\"p-fluid\"\n        ></p-password>\n      </div>\n      <div class=\"button-group\">\n        <p-button [label]=\"'\u5FD8\u8A18\u5BC6\u78BC' | translate\" styleClass=\"p-button-link\" (onClick)=\"onForgotClick()\"></p-button>\n        <button pButton pRipple-label [label]=\"'\u767B\u5165' | translate\" (click)=\"onLoginClick()\"> </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"image-container\">\n    <div class=\"image-box\">\n      <img src=\"assets/loginImage.png\" class=\"image-style\" alt=\"Image\" />\n    </div>\n  </div>\n</div>\n<p-toast></p-toast>\n\n<his-forgot-password (hideForgot)=\"onHideForgot()\" [isVisibleForgot]=isVisibleForgot></his-forgot-password>\n<his-reset-password (hideReset)=\"onHideReset()\" [isVisibleReset]=isVisibleReset [token]=\"token\"></his-reset-password>\n\n", styles: [":host ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem}:host ::ng-deep .p-dropdown,:host ::ng-deep .p-inputtext{width:100%;background:var(--white)!important}:host ::ng-deep .button-group{display:flex;gap:var(--spacing-lg)}:host ::ng-deep .button-group .p-button{max-width:142px;width:calc(50% - 8px)}:host ::ng-deep .button-group p-button{width:calc(50% - 8px)}:host ::ng-deep .button-group p-button .p-button{width:100%}:host ::ng-deep .p-dropdown{border-color:var(--outline);max-height:40px}:host ::ng-deep .p-dropdown .p-inputtext{padding:10px 16px}input:-webkit-autofill{-webkit-box-shadow:0 0 0 40px white inset!important}.login-page-container{width:100%;height:100%;display:flex}.login-container{width:33%;height:100%;padding:var(--spacing-xxl);display:flex;flex-direction:column;align-items:center;background-color:var(--surface-card)}.welcome-container{position:relative;width:100%;display:flex}.welcome-style{color:#13141461;font-size:32px;font-style:normal;font-weight:700;line-height:44px;letter-spacing:1.28px}.logo-container{width:44.79%;object-fit:cover;padding:var(--spacing-xxl) 0}.logo-container img{width:100%;display:block}.form-container{width:52%;min-width:250px;display:flex;flex-direction:column;justify-content:center;gap:var(--spacing-lg)}.title-style{font-size:24px;font-style:normal;font-weight:700;line-height:32px;display:flex;justify-content:center;padding-bottom:var(--spacing-xxl)}.input-text{display:flex;flex-direction:column;gap:8px}.input-label{color:var(--surface-on-surface);font-size:20px;font-style:normal;font-weight:700;line-height:28px;letter-spacing:.4px}.button-group{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-lg)}.image-container{width:67%;height:100%}.image-box{width:100%;height:100%}.image-style{width:100%;height:100%;object-fit:cover;display:block}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: ButtonModule }, { kind: "directive", type: i1.ButtonDirective, selector: "[pButton]", inputs: ["iconPos", "loadingIcon", "label", "icon", "loading"] }, { kind: "component", type: i1.Button, selector: "p-button", inputs: ["type", "iconPos", "icon", "badge", "label", "disabled", "loading", "loadingIcon", "raised", "rounded", "text", "plain", "severity", "outlined", "link", "size", "style", "styleClass", "badgeClass", "ariaLabel"], outputs: ["onClick", "onFocus", "onBlur"] }, { kind: "ngmodule", type: PasswordModule }, { kind: "component", type: i2.Password, selector: "p-password", inputs: ["ariaLabel", "ariaLabelledBy", "label", "disabled", "promptLabel", "mediumRegex", "strongRegex", "weakLabel", "mediumLabel", "maxLength", "strongLabel", "inputId", "feedback", "appendTo", "toggleMask", "inputStyleClass", "styleClass", "style", "inputStyle", "showTransitionOptions", "hideTransitionOptions", "autocomplete", "placeholder", "showClear"], outputs: ["onFocus", "onBlur", "onClear"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: ImageModule }, { kind: "ngmodule", type: DropdownModule }, { kind: "component", type: i4.Dropdown, selector: "p-dropdown", inputs: ["scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "dataKey", "filterBy", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "lazy", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "overlayOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "disabled", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "filterValue", "options"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear", "onLazyLoad"] }, { kind: "ngmodule", type: ToastModule }, { kind: "component", type: i5.Toast, selector: "p-toast", inputs: ["key", "autoZIndex", "baseZIndex", "life", "style", "styleClass", "position", "preventOpenDuplicates", "preventDuplicates", "showTransformOptions", "hideTransformOptions", "showTransitionOptions", "hideTransitionOptions", "breakpoints"], outputs: ["onClose"] }, { kind: "component", type: ForgotPasswordComponent, selector: "his-forgot-password", inputs: ["isVisibleForgot"], outputs: ["hideForgot"] }, { kind: "component", type: ResetPasswordComponent, selector: "his-reset-password", inputs: ["isVisibleReset", "token"], outputs: ["hideReset"] }, { kind: "ngmodule", type: InputTextModule }, { kind: "directive", type: i6.InputText, selector: "[pInputText]" }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i7.TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.9", ngImport: i0, type: LoginComponent, decorators: [{
            type: Component,
            args: [{ selector: 'his-login', standalone: true, providers: [MessageService], imports: [CommonModule,
                        ButtonModule,
                        PasswordModule,
                        FormsModule,
                        RouterLink,
                        ImageModule,
                        DropdownModule,
                        ToastModule,
                        ForgotPasswordComponent,
                        ResetPasswordComponent,
                        InputTextModule,
                        TranslateModule
                    ], template: "<div class=\"login-page-container\">\n  <div class=\"login-container\">\n    <div class=\"welcome-container\">\n    <div class=\"welcome-style\">Welcome!</div>\n  </div>\n    <div class=\"logo-container\">\n      <img src=\"assets/companyLogo.png\" alt=\"Image\" />\n    </div>\n\n    <div class=\"title-style\">\u96F2\u884C\u81F3\u5584\u91AB\u7642\u7CFB\u7D71</div>\n\n\n    <div class=\"form-container\">\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"branchSelector\">{{'\u9662\u5340'|translate}}</label>\n        <p-dropdown\n          id=\"branchSelector\"\n          [options]=\"branchesOption\"\n          [(ngModel)]=\"loginReq.orgNo\"\n          [placeholder]=\"'\u8ACB\u9078\u64C7\u9662\u5340' | translate\"\n        >\n      </p-dropdown>\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"UserName\">{{'\u5E33\u865F'|translate}}</label>\n        <input\n          pInputText\n          id=\"UserName\"\n          type=\"text\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5E33\u865F' | translate\"\n          [(ngModel)]=\"loginReq.userCode.code\"\n          class=\"p-inputtext p-element p-component\"\n        />\n      </div>\n      <div class=\"input-text\">\n        <label class=\"input-label\" htmlFor=\"Password\">{{'\u5BC6\u78BC'|translate}}</label>\n        <p-password\n          id=\"password\"\n          [placeholder]=\"'\u8ACB\u8F38\u5165\u5BC6\u78BC' | translate\"\n          [(ngModel)]=\"password\"\n          [feedback]=\"false\"\n          (keyup.enter)=\"onLoginClick()\"\n          class=\"p-fluid\"\n        ></p-password>\n      </div>\n      <div class=\"button-group\">\n        <p-button [label]=\"'\u5FD8\u8A18\u5BC6\u78BC' | translate\" styleClass=\"p-button-link\" (onClick)=\"onForgotClick()\"></p-button>\n        <button pButton pRipple-label [label]=\"'\u767B\u5165' | translate\" (click)=\"onLoginClick()\"> </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"image-container\">\n    <div class=\"image-box\">\n      <img src=\"assets/loginImage.png\" class=\"image-style\" alt=\"Image\" />\n    </div>\n  </div>\n</div>\n<p-toast></p-toast>\n\n<his-forgot-password (hideForgot)=\"onHideForgot()\" [isVisibleForgot]=isVisibleForgot></his-forgot-password>\n<his-reset-password (hideReset)=\"onHideReset()\" [isVisibleReset]=isVisibleReset [token]=\"token\"></his-reset-password>\n\n", styles: [":host ::ng-deep .p-dropdown-panel .p-dropdown-items .p-dropdown-item{padding:.5rem .75rem}:host ::ng-deep .p-dropdown,:host ::ng-deep .p-inputtext{width:100%;background:var(--white)!important}:host ::ng-deep .button-group{display:flex;gap:var(--spacing-lg)}:host ::ng-deep .button-group .p-button{max-width:142px;width:calc(50% - 8px)}:host ::ng-deep .button-group p-button{width:calc(50% - 8px)}:host ::ng-deep .button-group p-button .p-button{width:100%}:host ::ng-deep .p-dropdown{border-color:var(--outline);max-height:40px}:host ::ng-deep .p-dropdown .p-inputtext{padding:10px 16px}input:-webkit-autofill{-webkit-box-shadow:0 0 0 40px white inset!important}.login-page-container{width:100%;height:100%;display:flex}.login-container{width:33%;height:100%;padding:var(--spacing-xxl);display:flex;flex-direction:column;align-items:center;background-color:var(--surface-card)}.welcome-container{position:relative;width:100%;display:flex}.welcome-style{color:#13141461;font-size:32px;font-style:normal;font-weight:700;line-height:44px;letter-spacing:1.28px}.logo-container{width:44.79%;object-fit:cover;padding:var(--spacing-xxl) 0}.logo-container img{width:100%;display:block}.form-container{width:52%;min-width:250px;display:flex;flex-direction:column;justify-content:center;gap:var(--spacing-lg)}.title-style{font-size:24px;font-style:normal;font-weight:700;line-height:32px;display:flex;justify-content:center;padding-bottom:var(--spacing-xxl)}.input-text{display:flex;flex-direction:column;gap:8px}.input-label{color:var(--surface-on-surface);font-size:20px;font-style:normal;font-weight:700;line-height:28px;letter-spacing:.4px}.button-group{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-lg)}.image-container{width:67%;height:100%}.image-box{width:100%;height:100%}.image-style{width:100%;height:100%;object-fit:cover;display:block}\n"] }]
        }], propDecorators: { token: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdXNlci1sb2dpbi9zcmMvbGliL2xvZ2luLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL3VzZXItbG9naW4vc3JjL2xpYi9sb2dpbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDckQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUM3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDakQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFlLFNBQVMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQTtBQUN6RCxPQUFPLEVB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QUFDLENBQUMsQ0FBQTtTQUNQO0lBQ0gsQ0FBQztJQUVIOztPQUVHO0lBQ0gsYUFBYTtRQUNYLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0lBQzlCLENBQUM7SUFFRDs7T0FFRztJQUNILFlBQVk7UUFDVixJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFDOUIsQ0FBQzs4R0F4SVUsY0FBYztrR0FBZCxjQUFjLG9GQWZkLENBQUMsY0FBYyxDQUFDLDBCQzVCN0IsdTNFQThEQSxtNUREakNZLFlBQVksOEJBQ3BCLFlBQVksNGVBQ1osY0FBYyxxZkFDZCxXQUFXLDhtQkFFWCxXQUFXLDhCQUNYLGNBQWMsK2lDQUNkLFdBQVcsd1dBQ1gsdUJBQXVCLHNIQUN2QixzQkFBc0IsMkhBQ3RCLGVBQWUsbUdBQ2YsZUFBZTs7MkZBR04sY0FBYztrQkFwQjFCLFNBQVM7K0JBQ0UsV0FBVyxjQUNULElBQUksYUFHTCxDQUFDLGNBQWMsQ0FBQyxXQUNsQixDQUFDLFlBQVk7d0JBQ3BCLFlBQVk7d0JBQ1osY0FBYzt3QkFDZCxXQUFXO3dCQUNYLFVBQVU7d0JBQ1YsV0FBVzt3QkFDWCxjQUFjO3dCQUNkLFdBQVc7d0JBQ1gsdUJBQXVCO3dCQUN2QixzQkFBc0I7d0JBQ3RCLGVBQWU7d0JBQ2YsZUFBZTtxQkFDaEI7OEJBUVEsS0FBSztzQkFBYixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBJbWFnZU1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvaW1hZ2UnO1xuaW1wb3J0IHsgRHJvcGRvd25Nb2R1bGUgfSBmcm9tICdwcmltZW5nL2Ryb3Bkb3duJztcbmltcG9ydCB7IFRvYXN0TW9kdWxlIH0gZnJvbSAncHJpbWVuZy90b2FzdCc7XG5pbXBvcnQgeyBCdXR0b25Nb2R1bGUgfSBmcm9tICdwcmltZW5nL2J1dHRvbic7XG5pbXBvcnQgeyBQYXNzd29yZE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvcGFzc3dvcmQnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBSb3V0ZXIsIFJvdXRlckxpbmsgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTWVzc2FnZVNlcnZpY2UgfSBmcm9tICdwcmltZW5nL2FwaSc7XG5pbXBvcnQgeyBTaGFyZWRTZXJ2aWNlIH0gZnJvbSAnQGhpcy1iYXNlL3NoYXJlZCc7XG5pbXBvcnQgeyBMb2dpblNlcnZpY2UgfSBmcm9tICcuL2xvZ2luLnNlcnZpY2UnO1xuaW1wb3J0IHsgV3NOYXRzU2VydmljZSB9IGZyb20gJy4vd3MtbmF0cy5zZXJ2aWNlJztcbmltcG9ydCB7IFVzZXJBY2NvdW50LCBVc2VyUHJvZmlsZSwgVXNlclRva2VuIH0gZnJvbSAnQGhpcy12aWV3bW9kZWwvYXBwLXBvcnRhbC9kaXN0JztcbmltcG9ydCB7IExvZ2luUmVxIH0gZnJvbSAnQGhpcy12aWV3bW9kZWwvYXBwLXBvcnRhbC9kaXN0J1xuaW1wb3J0IHsgRm9yZ290UGFzc3dvcmRDb21wb25lbnQgfSBmcm9tIFwiLi9mb3Jnb3QtcGFzc3dvcmQvZm9yZ290LXBhc3N3b3JkLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgUmVzZXRQYXNzd29yZENvbXBvbmVudCB9IGZyb20gJy4vcmVzZXQtcGFzc3dvcmQvcmVzZXQtcGFzc3dvcmQuY29tcG9uZW50JztcbmltcG9ydCB7IElucHV0VGV4dE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvaW5wdXR0ZXh0JztcbmltcG9ydCAqIGFzIGJyYW5jaERhdGEgZnJvbSAnLi4vYXNzZXRzL2RhdGEvYnJhbmNoZXNOYW1lLmpzb24nXG5pbXBvcnQgJ0Bhbmd1bGFyL2xvY2FsaXplL2luaXQnO1xuaW1wb3J0IHsgVHJhbnNsYXRlTW9kdWxlLCBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBVc2VyQWNjb3VudFNlcnZpY2UsIFVzZXJQcm9maWxlU2VydmljZSB9IGZyb20gJ3NlcnZpY2UnO1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaGlzLWxvZ2luJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgdGVtcGxhdGVVcmw6ICcuL2xvZ2luLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbG9naW4uY29tcG9uZW50LnNjc3MnXSxcbiAgcHJvdmlkZXJzOiBbTWVzc2FnZVNlcnZpY2VdLFxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLFxuICAgIEJ1dHRvbk1vZHVsZSxcbiAgICBQYXNzd29yZE1vZHVsZSxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBSb3V0ZXJMaW5rLFxuICAgIEltYWdlTW9kdWxlLFxuICAgIERyb3Bkb3duTW9kdWxlLFxuICAgIFRvYXN0TW9kdWxlLFxuICAgIEZvcmdvdFBhc3N3b3JkQ29tcG9uZW50LFxuICAgIFJlc2V0UGFzc3dvcmRDb21wb25lbnQsXG4gICAgSW5wdXRUZXh0TW9kdWxlLFxuICAgIFRyYW5zbGF0ZU1vZHVsZVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIExvZ2luQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAvKiog5Yqg5a+G6K2Y5YildG9rZW5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBASW5wdXQoKSB0b2tlbiE6IHN0cmluZztcblxuICAvKiog6Zmi5Y2A6YG46aCFXG4gICAqIEB0eXBlIHtzdHJpbmdbXX1cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBicmFuY2hlc09wdGlvbjogc3RyaW5nW10gPSBbXTtcblxuICAvKiog6Ly45YWl55qE5a+G56K8XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgcGFzc3dvcmQ6IHN0cmluZyA9ICcnO1xuXG4gIC8qKiDnmbvlhaXos4foqIpcbiAgICogQHR5cGUge0xvZ2luUmVxfVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIGxvZ2luUmVxOiBMb2dpblJlcSA9IG5ldyBMb2dpblJlcSgpO1xuXG4gIC8qKiDkvb/nlKjogIXmrIrmnZZcbiAgICogQHR5cGUge1VzZXJUb2tlbn1cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICB1c2VyVG9rZW46IFVzZXJUb2tlbiA9IG5ldyBVc2VyVG9rZW4oKTtcblxuICAvKiog5b+Y6KiY5a+G56K86aCB6Z2i6aGv56S66IiH5ZCmXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIGlzVmlzaWJsZUZvcmdvdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKiDph43nva7lr4bnorzpoIHpnaLpoa/npLroiIflkKZcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBMb2dpbkNvbXBvbmVudFxuICAgKi9cbiAgaXNWaXNpYmxlUmVzZXQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKiog5L2/55So6ICF5biz6Jmf6LOH6KiKXG4gICAqIEB0eXBlIHtVc2VyQWNjb3VudH1cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICB1c2VyQWNjb3VudDogVXNlckFjY291bnQgPSBuZXcgVXNlckFjY291bnQoKTtcblxuICBtZXNzYWdlU2VydmljZSA9IGluamVjdChNZXNzYWdlU2VydmljZSk7XG4gIHJvdXRlciA9IGluamVjdChSb3V0ZXIpO1xuICB1c2VyQWNjb3VudFNlcnZpY2UgPSBpbmplY3QoVXNlckFjY291bnRTZXJ2aWNlKTtcbiAgdXNlclByb2ZpbGVTZXJ2aWNlID0gaW5qZWN0KFVzZXJQcm9maWxlU2VydmljZSk7XG4gICNsb2dpblNlcnZpY2UgPSBpbmplY3QoTG9naW5TZXJ2aWNlKTtcbiAgI3dzTmF0c1NlcnZpY2UgPSBpbmplY3QoV3NOYXRzU2VydmljZSk7XG4gICNzaGFyZWRTZXJ2aWNlID0gaW5qZWN0KFNoYXJlZFNlcnZpY2UpO1xuICAjdHJhbnNsYXRlU2VydmljZSA9IGluamVjdChUcmFuc2xhdGVTZXJ2aWNlKVxuXG4gIC8qKiDliJ3lp4vljJbnmbvlhaXnlavpnaLngrrmt7roibLmqKHlvI8g5Lul5Y+K6IiHTmF0c+mAo+e3mlxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIGFzeW5jIG5nT25Jbml0KCkge1xuICAgIHRoaXMuYnJhbmNoZXNPcHRpb24gPSBPYmplY3QudmFsdWVzKGJyYW5jaERhdGEpWzBdIGFzIHVua25vd24gYXMgc3RyaW5nW11cbiAgICBhd2FpdCB0aGlzLiN3c05hdHNTZXJ2aWNlLmNvbm5lY3QoKTtcbiAgICBjb25zdCB0aGVtZUxpbmsgPSA8SFRNTExpbmtFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1jc3MnKVxuICAgIHRoZW1lTGluay5ocmVmID0gJ2FwcC9zdHlsZXMvdGhlbWUtbGlnaHQuY3NzJ1xuICB9XG5cbiAgLyoqIOm7nuaTiueZu+WFpeaMiemIlVxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gIG9uTG9naW5DbGljaygpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2dpblJlcS5wYXNzd29yZEhhc2ggPSB0aGlzLiNsb2dpblNlcnZpY2UuZ2V0SGFzaFBhc3N3b3JkKHRoaXMucGFzc3dvcmQpO1xuICAgICAgdGhpcy4jbG9naW5TZXJ2aWNlLmdldFVzZXJUb2tlbih0aGlzLmxvZ2luUmVxKS5zdWJzY3JpYmUoeCA9PiB7XG4gICAgICAgIHRoaXMudXNlclRva2VuID0geFxuICAgICAgICB0aGlzLmNoZWNrVXNlclRva2VuKHRoaXMudXNlclRva2VuKTtcbiAgICAgICAgdGhpcy5nZXRVc2VyUHJvZmlsZSh0aGlzLnVzZXJUb2tlbik7XG4gICAgICB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuYWRkKHsgc2V2ZXJpdHk6ICdlcnJvcicsIHN1bW1hcnk6ICdFcnJvcicsIGRldGFpbDogdGhpcy4jdHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCfnmbvlhaXlpLHmlZcnKSB9KTtcbiAgICB9XG4gIH1cblxuICAvKiog5qqi5p+l5pyJ54Sh55m75YWl5o6I5qyKXG4gICAqIEBwYXJhbSB7VXNlclRva2VufSB1c2VyVG9rZW5cbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBjaGVja1VzZXJUb2tlbih1c2VyVG9rZW46IFVzZXJUb2tlbikge1xuICAgIGlmICh1c2VyVG9rZW4udG9rZW4gIT09ICcnKSB7XG4gICAgICB0aGlzLiNzaGFyZWRTZXJ2aWNlLnNoYXJlZFZhbHVlID0gbnVsbDtcbiAgICAgIHRoaXMuI2xvZ2luU2VydmljZS5nZXRVc2VyQWNjb3VudCh1c2VyVG9rZW4udXNlckNvZGUuY29kZSkuc3Vic2NyaWJlKHggPT4ge1xuICAgICAgICB0aGlzLnVzZXJBY2NvdW50ID0geFxuICAgICAgICB0aGlzLnVzZXJBY2NvdW50U2VydmljZS51c2VyQWNjb3VudC5zZXQoeCk7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL2hvbWUnXSk7XG4gICAgICB9KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuYWRkKHsgc2V2ZXJpdHk6ICdlcnJvcicsIHN1bW1hcnk6ICdFcnJvcicsIGRldGFpbDogdGhpcy4jdHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCfluLPomZ/miJblr4bnorzpjK/oqqQnKSB9KTtcbiAgICB9XG4gIH1cblxuICAgIC8qKiDmqqLmn6XmjojmrIrmi7/liLBVc2VyIFByb2ZpbGVcbiAgICogQHBhcmFtIHtVc2VyVG9rZW59IHVzZXJUb2tlblxuICAgKiBAbWVtYmVyb2YgTG9naW5Db21wb25lbnRcbiAgICovXG4gICAgZ2V0VXNlclByb2ZpbGUodXNlclRva2VuOiBVc2VyVG9rZW4pIHtcbiAgICAgIGlmICh1c2VyVG9rZW4udG9rZW4gIT09ICcnKSB7XG4gICAgICAgIHRoaXMudXNlclByb2ZpbGVTZXJ2aWNlLmdldFVzZXJQcm9maWxlKHVzZXJUb2tlbi51c2VyQ29kZS5jb2RlLCBcImFwcC1wb3J0YWxcIilcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHg6IFVzZXJQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMudXNlclByb2ZpbGVTZXJ2aWNlLnVzZXJQcm9maWxlLnNldCh4KTtcbiAgICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gIC8qKiDpu57mk4rlv5joqJjlr4bnorxcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkZvcmdvdENsaWNrKCkge1xuICAgIHRoaXMuaXNWaXNpYmxlRm9yZ290ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKiDpl5zplonlv5joqJjlr4bnorzoppbnqpdcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkhpZGVGb3Jnb3QoKSB7XG4gICAgdGhpcy5pc1Zpc2libGVGb3Jnb3QgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiDpl5zplonph43nva7lr4bnorzoppbnqpdcbiAgICogQG1lbWJlcm9mIExvZ2luQ29tcG9uZW50XG4gICAqL1xuICBvbkhpZGVSZXNldCgpIHtcbiAgICB0aGlzLmlzVmlzaWJsZVJlc2V0ID0gZmFsc2U7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJsb2dpbi1wYWdlLWNvbnRhaW5lclwiPlxuICA8ZGl2IGNsYXNzPVwibG9naW4tY29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cIndlbGNvbWUtY29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cIndlbGNvbWUtc3R5bGVcIj5XZWxjb21lITwvZGl2PlxuICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibG9nby1jb250YWluZXJcIj5cbiAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2NvbXBhbnlMb2dvLnBuZ1wiIGFsdD1cIkltYWdlXCIgLz5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJ0aXRsZS1zdHlsZVwiPumbsuihjOiHs+WWhOmGq+eZguezu+e1sTwvZGl2PlxuXG5cbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC10ZXh0XCI+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImlucHV0LWxhYmVsXCIgaHRtbEZvcj1cImJyYW5jaFNlbGVjdG9yXCI+e3sn6Zmi5Y2AJ3x0cmFuc2xhdGV9fTwvbGFiZWw+XG4gICAgICAgIDxwLWRyb3Bkb3duXG4gICAgICAgICAgaWQ9XCJicmFuY2hTZWxlY3RvclwiXG4gICAgICAgICAgW29wdGlvbnNdPVwiYnJhbmNoZXNPcHRpb25cIlxuICAgICAgICAgIFsobmdNb2RlbCldPVwibG9naW5SZXEub3JnTm9cIlxuICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCIn6KuL6YG45pOH6Zmi5Y2AJyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgID5cbiAgICAgIDwvcC1kcm9wZG93bj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0LXRleHRcIj5cbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiaW5wdXQtbGFiZWxcIiBodG1sRm9yPVwiVXNlck5hbWVcIj57eyfluLPomZ8nfHRyYW5zbGF0ZX19PC9sYWJlbD5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgcElucHV0VGV4dFxuICAgICAgICAgIGlkPVwiVXNlck5hbWVcIlxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiJ+iri+i8uOWFpeW4s+iZnycgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgIFsobmdNb2RlbCldPVwibG9naW5SZXEudXNlckNvZGUuY29kZVwiXG4gICAgICAgICAgY2xhc3M9XCJwLWlucHV0dGV4dCBwLWVsZW1lbnQgcC1jb21wb25lbnRcIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtdGV4dFwiPlxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJpbnB1dC1sYWJlbFwiIGh0bWxGb3I9XCJQYXNzd29yZFwiPnt7J+WvhueivCd8dHJhbnNsYXRlfX08L2xhYmVsPlxuICAgICAgICA8cC1wYXNzd29yZFxuICAgICAgICAgIGlkPVwicGFzc3dvcmRcIlxuICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCIn6KuL6Ly45YWl5a+G56K8JyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgICAgWyhuZ01vZGVsKV09XCJwYXNzd29yZFwiXG4gICAgICAgICAgW2ZlZWRiYWNrXT1cImZhbHNlXCJcbiAgICAgICAgICAoa2V5dXAuZW50ZXIpPVwib25Mb2dpbkNsaWNrKClcIlxuICAgICAgICAgIGNsYXNzPVwicC1mbHVpZFwiXG4gICAgICAgID48L3AtcGFzc3dvcmQ+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJidXR0b24tZ3JvdXBcIj5cbiAgICAgICAgPHAtYnV0dG9uIFtsYWJlbF09XCIn5b+Y6KiY5a+G56K8JyB8IHRyYW5zbGF0ZVwiIHN0eWxlQ2xhc3M9XCJwLWJ1dHRvbi1saW5rXCIgKG9uQ2xpY2spPVwib25Gb3Jnb3RDbGljaygpXCI+PC9wLWJ1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBwQnV0dG9uIHBSaXBwbGUtbGFiZWwgW2xhYmVsXT1cIifnmbvlhaUnIHwgdHJhbnNsYXRlXCIgKGNsaWNrKT1cIm9uTG9naW5DbGljaygpXCI+IDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiaW1hZ2UtY29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cImltYWdlLWJveFwiPlxuICAgICAgPGltZyBzcmM9XCJhc3NldHMvbG9naW5JbWFnZS5wbmdcIiBjbGFzcz1cImltYWdlLXN0eWxlXCIgYWx0PVwiSW1hZ2VcIiAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuPHAtdG9hc3Q+PC9wLXRvYXN0PlxuXG48aGlzLWZvcmdvdC1wYXNzd29yZCAoaGlkZUZvcmdvdCk9XCJvbkhpZGVGb3Jnb3QoKVwiIFtpc1Zpc2libGVGb3Jnb3RdPWlzVmlzaWJsZUZvcmdvdD48L2hpcy1mb3Jnb3QtcGFzc3dvcmQ+XG48aGlzLXJlc2V0LXBhc3N3b3JkIChoaWRlUmVzZXQpPVwib25IaWRlUmVzZXQoKVwiIFtpc1Zpc2libGVSZXNldF09aXNWaXNpYmxlUmVzZXQgW3Rva2VuXT1cInRva2VuXCI+PC9oaXMtcmVzZXQtcGFzc3dvcmQ+XG5cbiJdfQ==