<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->
<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<!-- eslint-disable @angular-eslint/template/elements-content -->
<ng-container *ngIf="news && news.length < 1; else ShowNews">
  <h1 class="p-datatable" [innerText]="'沒有最新消息'|translate"></h1>
</ng-container>

<ng-template #ShowNews>
  <ng-container *ngIf="news[0].hasOwnProperty('sharedData'); else myNormalNews">
    <p-table [value]="news!" [tableStyle]="{ width: '100%' }">
      <ng-template pTemplate="body" let-news>
        <tr>
          <td class="first-child">
            <span *ngIf="news.execStatus['code'] === '10'">
              <button
                pButton
                pRipple
                type="button"
                [label]="'完成'|translate"
                class="p-button-outlined check-button"
                (click)="onChangeStatus(news)"
              ></button>
            </span>
          </td>
          <td class="nth-child" (click)="onNavNewsClick(news.url,news.sharedData)"><span class="label-m">{{ news.period.start.formatString('YYYY-MM-DD HH:mm') }}</span>
          <td class="last-child" (click)="onNavNewsClick(news.url,news.sharedData)"><span class="label-m">{{ news.subject }}</span></td>
        </tr>
      </ng-template>
    </p-table>
  </ng-container>

</ng-template>

<ng-template #completedTable>
  <p-table
    [value]="news!"
    [tableStyle]="{ width: '100%' }">
    <ng-template pTemplate="body" let-news>
      <tr>
        <td class="complete-first"  (click)="onNavNewsClick(news.url,news.sharedData)">
          <span class="label-m">{{ news.period.start.formatString('YYYY-MM-DD HH:mm') }}</span>
        </td>
        <td class="complete-last"  (click)="onNavNewsClick(news.url,news.sharedData)">
          <span class="label-m">{{ news.subject }}</span>
        </td>
      </tr>
    </ng-template>
  </p-table>
</ng-template>

<ng-template #myNormalNews>
  <p-table [value]="news!" [tableStyle]="{ width: '100%' }">
    <ng-template pTemplate="body" let-news>
      <tr>
        <td class="first-child">
            <button
              pButton
              pRipple
              type="button"
              [label]="'已讀'|translate"
              class="p-button-outlined check-button"
              (click)="onChangeNormalNewsStatus(news._id)"
            ></button>
        </td>
        <td class="nth-child" (click)="onNavNewsClick(news.url)"><span class="label-m">{{ news.sendTime.formatString('YYYY-MM-DD HH:mm') }}</span>
        <td class="last-child" (click)="onNavNewsClick(news.url)"><span class="label-m">{{ news.title }}</span></td>
      </tr>
    </ng-template>
  </p-table>
</ng-template>

<ng-template #customtemplate>
  <p-table [value]="news!" [tableStyle]="{ width: '100%' }">
    <ng-template pTemplate="body" let-news>
      <tr>
        <td class="first-child">
          <span *ngIf="news.execStatus['code'] === '10'">
            <button
              pButton
              pRipple
              type="button"
              [label]="'完成'|translate"
              class="p-button-outlined check-button"
              (click)="onChangeStatus(news)"
            ></button>
          </span>
        </td>
        <td class="nth-child" (click)="onNavNewsClick(news.url,news.sharedData)"><span class="label-m">{{ news.period.start.formatString('YYYY-MM-DD HH:mm') }}</span>
        <td class="last-child" (click)="onNavNewsClick(news.url,news.sharedData)"><span class="label-m">{{ news.subject }}</span></td>
      </tr>
    </ng-template>
  </p-table>
</ng-template>
